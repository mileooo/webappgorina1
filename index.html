<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ФермаFresh — свежие овощи и фрукты</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --white:#FFFFFF;
  --card-bg:#FAF9F6;
  --brand:#A4DE02;
  --cta:#FF8C42;
  --text:#2E2E2E;
  --muted:#666666;
  --border:#E6E6E6;
  --shadow:0 2px 8px rgba(0,0,0,0.05);
  --container:1200px;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--white);color:var(--text);font-family:Inter,Arial,sans-serif;-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
button,input,select,textarea{font-family:inherit}
.container{max-width:var(--container);margin:0 auto;padding:24px;}
.header{position:sticky;top:0;z-index:40;background:rgba(255,255,255,0.98);backdrop-filter:blur(4px);border-bottom:1px solid var(--border)}
.header-inner{max-width:var(--container);margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:16px 24px;gap:20px}
.logo{display:flex;align-items:center;gap:12px}
.logo .mark{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--brand),#7cc900);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(164,222,2,0.12)}
.logo .mark svg{width:22px;height:22px;fill:#fff}
.logo h4{font-family:Poppins,Inter;font-weight:700;font-size:18px;margin:0;color:var(--text)}
.nav{display:flex;gap:16px;align-items:center}
.nav a{font-weight:600;padding:8px 10px;border-radius:8px}
.nav a:hover{background:var(--card-bg)}
.hero{max-width:var(--container);margin:20px auto;padding:28px;background:var(--card-bg);border-radius:16px;display:flex;gap:24px;align-items:center;box-shadow:var(--shadow)}
.hero-left{flex:1;min-width:260px}
.hero h1{font-family:Poppins;font-weight:800;font-size:40px;margin:0 0 8px;color:var(--text);line-height:1.02}
.hero p{font-size:18px;color:var(--muted);margin:0 0 12px}
.hero-cta{display:flex;gap:12px}
.btn-cta{background:var(--cta);color:#fff;border:0;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer;font-family:Poppins;box-shadow:0 6px 18px rgba(255,140,66,0.12);transition:transform .14s}
.btn-cta:hover{transform:translateY(-3px);background:#ff7a18}
.btn-secondary{background:transparent;border:1px solid var(--border);padding:10px 14px;border-radius:10px;color:var(--text);cursor:pointer}
.hero-right{width:420px;max-width:40%}
.hero-image{border-radius:14px;overflow:hidden;height:220px;background:linear-gradient(180deg,#fff,#f6f5f3);display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow)}
.hero-image img{width:100%;height:100%;object-fit:cover;display:block}
.main{max-width:var(--container);margin:0 auto;padding:0 24px 80px}
.filters{display:flex;gap:12px;align-items:center;margin:20px 0;flex-wrap:wrap}
.filter-btn{padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:transparent;font-weight:600;cursor:pointer}
.filter-btn.active{background:var(--brand);color:#fff;box-shadow:0 8px 20px rgba(164,222,2,0.12);border-color:transparent}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px}
.card{background:var(--card-bg);border-radius:12px;box-shadow:var(--shadow);padding:14px;display:flex;flex-direction:column;gap:10px;height:380px;transition:transform .18s,box-shadow .18s}
.card:hover{transform:scale(1.03);box-shadow:0 8px 28px rgba(0,0,0,0.08)}
.photo{height:70%;border-radius:10px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center}
.photo img{width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .45s}
.info{display:flex;flex-direction:column;gap:6px;flex:1}
.name{font-family:Poppins;font-weight:600;font-size:16px;color:var(--text)}
.desc{font-size:13px;color:var(--muted);min-height:34px}
.price{font-weight:700;color:var(--text);font-size:16px}
.actions{display:flex;align-items:center;gap:8px;justify-content:space-between}
.qty-input{width:84px;padding:8px;border-radius:8px;border:1px solid var(--border);text-align:center}
.add-to-cart{background:var(--brand);color:#fff;border:0;padding:10px 12px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(164,222,2,0.12);transition:background .12s}
.add-to-cart:hover{background:var(--cta)}
.cart-panel{position:fixed;right:20px;bottom:80px;width:360px;background:var(--white);border-radius:12px;box-shadow:0 12px 36px rgba(0,0,0,0.12);padding:14px;z-index:60;border:1px solid var(--border);display:none}
.cart-row{display:flex;align-items:center;justify-content:space-between;background:#fbfbfb;padding:10px;border-radius:8px;border:1px solid var(--border)}
.cart-total{display:flex;justify-content:space-between;align-items:center;margin-top:10px;font-weight:800;font-size:16px}
.cart-actions{display:flex;gap:8px;margin-top:12px}
.btn{padding:10px;border-radius:12px;border:0;cursor:pointer;font-weight:700}
.btn-clear{background:#f2f2f2;color:var(--text)}
.btn-check{background:var(--brand);color:#fff}
.btn-check:hover{background:var(--cta)}
.modal{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:80}
.modal .panel{width:820px;max-width:95%;background:var(--card-bg);border-radius:12px;padding:20px;box-shadow:0 12px 36px rgba(0,0,0,0.18)}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.form-row{display:flex;flex-direction:column;gap:6px;margin-bottom:8px}
.form-row label{font-weight:600;font-size:14px}
.form-row input, .form-row select, .form-row textarea{padding:10px;border-radius:8px;border:1px solid #ccc}
.form-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
.floating-cart{position:fixed;bottom:20px;right:20px;background:var(--brand);color:#fff;padding:12px 18px;border-radius:40px;box-shadow:0 8px 18px rgba(0,0,0,0.15);cursor:pointer;display:flex;align-items:center;gap:12px;z-index:100;transition:all .25s;opacity:0;pointer-events:none}
.floating-cart.show{opacity:1;pointer-events:auto;transform:translateY(0)}
@media(max-width:980px){.hero{flex-direction:column}.grid{grid-template-columns:repeat(auto-fill,minmax(240px,1fr))}.cart-panel{right:12px;left:12px;width:auto;bottom:100px}.modal .panel{width:95%}}
.footer{max-width:var(--container);margin:40px auto 80px;padding:24px;text-align:center;color:var(--muted);font-size:14px}
.fade-in{animation:fadeIn .35s ease both}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>
<header class="header">
  <div class="header-inner">
    <div class="logo">
      <div class="mark" aria-hidden>
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C8 6 4 6 2 8c2 2 2 6 6 10s8 6 10 6c-2-6 0-12-6-22z"/></svg>
      </div>
      <h4>ФермаFresh</h4>
    </div>
    <nav class="nav" aria-label="Меню">
      <a href="#">Главная</a>
      <a href="#">Каталог</a>
      <a href="#">О нас</a>
      <a href="#">Доставка</a>
      <a href="#">Контакты</a>
    </nav>
  </div>
</header>

<section class="hero container">
  <div class="hero-left">
    <h1>Свежие продукты — прямо к вам домой</h1>
    <p>Доставим за 60 минут из фермерских хозяйств. Свежесть, которую можно почувствовать.</p>
    <div class="hero-cta">
      <button class="btn-cta" id="hero-order">Заказать сейчас</button>
      <button class="btn-secondary" id="view-catalog">Посмотреть каталог</button>
    </div>
  </div>
  <div class="hero-right">
    <div class="hero-image">
      <img src="https://images.unsplash.com/photo-1518976024611-6d9b0b0b1f7f?q=80&w=1200&auto=format&fit=crop" alt="Свежие фрукты" />
    </div>
  </div>
</section>

<main class="main container">
  <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
    <div>
      <div class="filters" id="filters">
        <button class="filter-btn active" data-filter="all">Все</button>
        <button class="filter-btn" data-filter="fruits">Фрукты</button>
        <button class="filter-btn" data-filter="vegetables">Овощи</button>
        <button class="filter-btn" data-filter="sets">Сеты</button>
        <button class="filter-btn" data-filter="promo">Акции</button>
      </div>
    </div>
    <div style="margin-left:auto" class="small">Показано <span id="shown-count">0</span> товаров</div>
  </div>
  <div style="margin-top:12px" class="fade-in">
    <div id="catalog" class="grid"></div>
  </div>
</main>

<aside id="cart-panel" class="cart-panel" aria-hidden="true">
  <h4>Корзина <small style="color:var(--muted);font-weight:600">(<span id="cart-count-panel">0</span>)</small></h4>
  <div class="cart-items" id="cart-items"></div>
  <div class="cart-total"><span>Итого</span><span id="cart-sum">0 ₽</span></div>
  <div class="cart-actions">
    <button id="clear-cart" class="btn btn-clear">Очистить</button>
    <button id="goto-checkout" class="btn btn-check">Оформить заказ</button>
  </div>
</aside>

<div id="modal" class="modal" aria-hidden="true">
  <div class="panel">
    <h3 style="font-family:Poppins;margin:0 0 8px">Оформление заказа</h3>
    <div id="modal-order-list" style="max-height:300px;overflow:auto;border:1px solid var(--border);padding:8px;border-radius:8px;background:#fff;margin-bottom:10px"></div>
    <div style="display:flex;justify-content:space-between;font-weight:700;margin-bottom:12px">
      <div>Итого</div><div id="modal-total">0 ₽</div>
    </div>
    <button id="close-modal" class="btn btn-clear">Закрыть</button>
  </div>
</div>

<div class="floating-cart" id="floating-cart">
  🛒 <span id="floating-cart-count">0</span> • <span id="floating-cart-sum">0 ₽</span>
</div>

<footer class="footer">© ФермаFresh — Свежесть, которую можно почувствовать.</footer>

<script>
// ================== Данные ассортимента ==================
const products = [
  ["🍉 Арбуз — 40₽/кг", "Арбуз", 40, "fruits"],
  ["🍐 Груша — 340₽/кг", "Груша", 340, "fruits"],
  ["🍊 Апельсин — 220₽/кг", "Апельсин", 220, "fruits"],
  ["🍈 Дыня торпеда Узбекистан — 80₽/кг", "Дыня торпеда Узбекистан", 80, "fruits"],
  ["🍈 Дыня колхозница — 80₽/кг", "Дыня колхозница", 80, "fruits"],
  ["🍇 Виноград зеленый (без косточек) — 320₽/кг", "Виноград зеленый (без косточек)", 320, "fruits"],
  ["🍇 Виноград темный (без косточек) — 320₽/кг", "Виноград темный (без косточек)", 320, "fruits"],
  ["🍇 Виноград черный (Мерседес) — 300₽/кг", "Виноград черный (Мерседес)", 300, "fruits"],
  ["🍑 Нектарин Узбекистан красный — 170₽/кг", "Нектарин Узбекистан красный", 170, "fruits"],
  ["🍑 Нектарин Турция — 350₽/кг", "Нектарин Турция", 350, "fruits"],
  ["🍑 Нектарин Узбекистан желтый (вкус лимон) — 250₽/кг", "Нектарин Узбекистан желтый (вкус лимон)", 250, "fruits"],
  ["🍑 Нектарин Узбекистан зеленый — 190₽/кг", "Нектарин Узбекистан зеленый", 190, "fruits"],
  ["🍌 Банан — 170₽/кг", "Банан", 170, "fruits"],
  ["🥔 Картофель Чувашия — 45₽/кг", "Картофель Чувашия", 45, "vegetables"],
  ["🥔 Картофель Краснодар — 45₽/кг", "Картофель Краснодар", 45, "vegetables"],
  ["🥕 Морковь Волгоград — 45₽/кг", "Морковь Волгоград", 45, "vegetables"],
  ["🧅 Лук репчатый Волгоград — 45₽/кг", "Лук репчатый Волгоград", 45, "vegetables"],
  ["🌱 Лук зеленый — 350₽/кг", "Лук зеленый", 350, "vegetables"],
  ["🌱 Укроп, петрушка — 350₽/кг", "Укроп, петрушка", 350, "vegetables"],
  ["🌱 Кинза — 440₽/кг", "Кинза", 440, "vegetables"],
  ["🌱 Базелик — 50₽/пучок", "Базелик (пучок)", 50, "vegetables"],
  ["🧄 Чеснок Ташкент — 400₽/кг", "Чеснок Ташкент", 400, "vegetables"],
  ["🫑 Перец болгарский — 130₽/кг", "Перец болгарский", 130, "vegetables"],
  ["🌶️ Перец чили — 25₽/шт", "Перец чили", 25, "vegetables"],
  ["🍅 Помидоры Азербайджанские — 220₽/кг", "Помидоры Азербайджанские", 220, "vegetables"],
  ["🍅 Помидоры Ростовские — 180₽/кг", "Помидоры Ростовские", 180, "vegetables"],
  ["🍅 Помидоры Волгоград (мелкие) — 80₽/кг", "Помидоры Волгоград (мелкие)", 80, "vegetables"],
  ["🍅 Помидоры домашние — 240₽/кг", "Помидоры домашние", 240, "vegetables"],
  ["🍅 Помидоры Астрахань (желтые) — 190₽/кг", "Помидоры Астрахань (желтые)", 190, "vegetables"],
  ["🥒 Огурцы Московские — 150₽/кг", "Огурцы Московские", 150, "vegetables"],
  ["🥒 Огурцы Самарские — 80₽/кг", "Огурцы Самарские", 80, "vegetables"],
  ["🥒 Огурцы домашние — 150₽/кг", "Огурцы домашние", 150, "vegetables"],
  ["🍑 Слива 4 вида — 190₽/кг - Ташкент; Медовая - 220₽/кг; Желтая - 250₽/кг; Чернослива - 220₽/кг", "Слива 4 вида", 220, "fruits"],
  ["🍒 Черешня — 580₽/кг", "Черешня", 580, "fruits"],
  ["🫐 Голубика — 800₽/кг", "Голубика", 800, "fruits"],
  ["🍑 Абрикос Армения — 240₽/кг", "Абрикос Армения", 240, "fruits"],
  ["🍑 Абрикос Киргизия — 150₽/кг", "Абрикос Киргизия", 150, "fruits"],
  ["🍑 Персик Ташкент — 250₽/кг", "Персик Ташкент", 250, "fruits"],
  ["🍑 Персик Армения — 380₽/кг", "Персик Армения", 380, "fruits"],
  ["🍑 Персик Турция — 450₽/кг", "Персик Турция", 450, "fruits"],
  ["🍑 Персик Инжирный — 350₽/кг", "Персик Инжирный", 350, "fruits"],
  ["🥝 Киви — 450₽/кг", "Киви", 450, "fruits"],
  ["Кабачок — 55₽/кг", "Кабачок", 55, "vegetables"],
  ["🍆 Баклажан — 130₽/кг", "Баклажан", 130, "vegetables"],
  ["🍋 Лимон — 290₽/кг", "Лимон", 290, "fruits"]
];

// ================== Переменные ==================
let cart = [];
const catalogEl = document.getElementById('catalog');
const cartItemsEl = document.getElementById('cart-items');
const cartSumEl = document.getElementById('cart-sum');
const cartCountPanel = document.getElementById('cart-count-panel');
const floatingCart = document.getElementById('floating-cart');
const floatingCartCount = document.getElementById('floating-cart-count');
const floatingCartSum = document.getElementById('floating-cart-sum');
const cartPanel = document.getElementById('cart-panel');
const modal = document.getElementById('modal');

// ================== Хелперы ==================
function formatRub(n){return n+' ₽';}
function animateFloatingCart(){floatingCart.style.transform='scale(1.3)';setTimeout(()=>floatingCart.style.transform='scale(1)',200);}

// ================== Летающий товар ==================
function flyToCart(img){
  const flyImg = img.cloneNode(true);
  const rect = img.getBoundingClientRect();
  flyImg.style.position='fixed';
  flyImg.style.left=rect.left+'px';
  flyImg.style.top=rect.top+'px';
  flyImg.style.width=rect.width+'px';
  flyImg.style.height=rect.height+'px';
  flyImg.style.zIndex=9999;
  flyImg.style.transition='all 0.8s cubic-bezier(.5,-0.2,.3,1.5)';
  document.body.appendChild(flyImg);

  const cartRect = floatingCart.getBoundingClientRect();
  setTimeout(()=>{
    flyImg.style.left = (cartRect.left+cartRect.width/2 - rect.width/2) + 'px';
    flyImg.style.top = (cartRect.top+cartRect.height/2 - rect.height/2) + 'px';
    flyImg.style.width='20px';
    flyImg.style.height='20px';
    flyImg.style.opacity=0.5;
  },10);

  flyImg.addEventListener('transitionend', ()=>{flyImg.remove();});
}

// ================== Всплывающее "+1 товар" ==================
function showPlusOne(){
  const plus=document.createElement('div');
  plus.textContent='+1';
  plus.style.position='fixed';
  const rect=floatingCart.getBoundingClientRect();
  plus.style.left=(rect.left+rect.width/2-10)+'px';
  plus.style.top=(rect.top-20)+'px';
  plus.style.color='#fff';
  plus.style.background='#FF8C42';
  plus.style.padding='2px 6px';
  plus.style.borderRadius='12px';
  plus.style.fontWeight='700';
  plus.style.zIndex=10000;
  plus.style.transition='all 0.8s ease-out';
  document.body.appendChild(plus);
  setTimeout(()=>{plus.style.top=(rect.top-50)+'px'; plus.style.opacity='0';},10);
  setTimeout(()=>plus.remove(),800);
}

// ================== Рендер каталога ==================
function renderCatalog(filter='all'){
  catalogEl.innerHTML='';
  let shown=0;
  products.forEach(p=>{
    const [name,desc,price,cat]=p;
    if(filter!=='all' && cat!==filter) return;
    shown++;
    const card=document.createElement('div');card.className='card fade-in';
    card.innerHTML=`
      <div class="photo"><img src="https://source.unsplash.com/400x300/?${desc}" alt="${desc}"></div>
      <div class="info">
        <div class="name">${name}</div>
        <div class="desc">${desc}</div>
        <div class="price">${formatRub(price)}</div>
        <div class="actions">
          <input type="number" value="1" min="1" class="qty-input">
          <button class="add-to-cart">В корзину</button>
        </div>
      </div>
    `;
    catalogEl.appendChild(card);
    const imgEl=card.querySelector('img');
    imgEl.onload=()=>imgEl.style.opacity=1;
    const addBtn=card.querySelector('.add-to-cart');
    const qtyInput=card.querySelector('.qty-input');
    addBtn.onclick=()=>{
      const qty=Number(qtyInput.value);
      flyToCart(imgEl);
      showPlusOne();
      const existing=cart.find(c=>c.name===desc);
      if(existing){existing.qty+=qty; existing.total=existing.qty*price;}
      else cart.push({name:desc,price,qty,total:price*qty});
      renderCart();
      floatingCart.classList.add('show');
      animateFloatingCart();
    }
  });
  document.getElementById('shown-count').textContent=shown;
}

// ================== Рендер корзины ==================
function renderCart(){
  cartItemsEl.innerHTML='';
  let sum=0;
  cart.forEach(item=>{
    sum+=item.total;
    const row=document.createElement('div');row.className='cart-row';
    row.innerHTML=`
      <div class="left">
        <div style="font-weight:700">${item.name}</div>
        <div class="small" style="color:var(--muted)">${item.qty} шт • ${formatRub(item.total)}</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">
        <button style="background:transparent;border:0;cursor:pointer;color:${'#e74c3c'}" data-remove="${item.name}">✕</button>
        <div style="font-weight:700">${formatRub(item.total)}</div>
      </div>
    `;
    cartItemsEl.appendChild(row);
  });
  cartSumEl.textContent=formatRub(sum);
  cartCountPanel.textContent=cart.length;
  floatingCartCount.textContent=cart.length;
  floatingCartSum.textContent=formatRub(sum);
  cartItemsEl.querySelectorAll('[data-remove]').forEach(btn=>{btn.onclick=()=>{cart=cart.filter(c=>c.name!==btn.dataset.remove);renderCart();}});
}

// ================== Фильтры ==================
document.querySelectorAll('.filter-btn').forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    renderCatalog(btn.dataset.filter);
  }
});

// ================== Плавающая корзина ==================
floatingCart.onclick=()=>cartPanel.style.display='block';
document.getElementById('clear-cart').onclick=()=>{cart=[];renderCart();};

// ================== Модальное оформление ==================
document.getElementById('goto-checkout').onclick=()=>{
  modal.style.display='flex';
  const modalList=document.getElementById('modal-order-list');
  modalList.innerHTML='';
  let sum=0;
  cart.forEach(item=>{
    sum+=item.total;
    const div=document.createElement('div');div.style.display='flex';
    div.style.justifyContent='space-between';
    div.textContent=`${item.name} x ${item.qty} шт - ${formatRub(item.total)}`;
    modalList.appendChild(div);
  });
  document.getElementById('modal-total').textContent=formatRub(sum);
}
document.getElementById('close-modal').onclick=()=>modal.style.display='none';

// ================== Инициализация ==================
renderCatalog();
renderCart();
</script>
