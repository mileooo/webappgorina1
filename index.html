<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ú–∞–≥–∞–∑–∏–Ω –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤</title>
<style>
:root {
  --primary:#A4DE02;
  --primary-hover:#FF8C42;
  --bg:#FFFFFF;
  --card-bg:#FAF9F6;
  --text:#2E2E2E;
  --text-secondary:#666666;
  --border:#E6E6E6;
  --success:#5CB85C;
  --error:#E74C3C;
}

body {
  margin:0;
  font-family: 'Inter', sans-serif;
  background:var(--bg);
  color:var(--text);
}

h1,h2,h3,h4 {margin:0;}

header {
  background: var(--primary);
  color:white;
  padding:20px;
  text-align:center;
  font-family: 'Poppins', sans-serif;
  font-weight:600;
}

.categories, .subcategories {
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
  margin:16px 0;
}

.categories button, .subcategories button {
  padding:8px 12px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
  transition:0.12s;
  background:#eee;
}

.categories button.active, .subcategories button.active {
  background:var(--primary);
  color:white;
}

.wrap {
  display:flex;
  gap:20px;
  padding:0 16px;
  flex-wrap:wrap;
  justify-content:center;
}

#catalog {
  display:grid;
  grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
  gap:16px;
}

.card {
  background:var(--card-bg);
  border-radius:12px;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:8px;
  box-shadow:0 2px 8px rgba(0,0,0,0.05);
  cursor:pointer;
  transition: transform 0.2s;
}
.card:hover {transform: scale(1.03);}

.img-placeholder {
  height:180px;
  background:linear-gradient(90deg,#f0f0f0,#fafafa);
  border-radius:10px;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#999;
}

.title {font-weight:600; font-size:16px;}
.price {color:#666; font-size:14px;}

.cart {
  position:fixed;
  right:16px;
  top:100px;
  width:280px;
  background:white;
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

.cart h3 {text-align:center; font-weight:600;}
.cart-list {max-height:300px; overflow-y:auto; margin:8px 0;}
.cart-item {display:flex; justify-content:space-between; align-items:center; padding:6px; border-radius:8px; background:#fafafa;}
.remove {background:var(--error); color:white; border:none; border-radius:6px; cursor:pointer; padding:4px 6px;}
.total {text-align:right; font-weight:700; margin-top:8px;}
.cart-actions {display:flex; gap:8px; margin-top:8px;}
.btn {flex:1; padding:8px; border-radius:8px; border:none; cursor:pointer; font-weight:600;}
.btn-clear {background:var(--error); color:white;}
.btn-check {background:var(--primary); color:white;}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞ */
.modal {
  display:none;
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.5);
  justify-content:center;
  align-items:center;
  z-index:1000;
}

.modal-content {
  background:white;
  max-width:500px;
  width:90%;
  border-radius:12px;
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:12px;
  position:relative;
}

.modal-content h2 {font-family:'Poppins', sans-serif; font-weight:600;}
.modal-content .description {font-size:14px; color:#666;}
.modal-content .kbju {font-size:14px; font-weight:600;}
.modal-content textarea {width:100%; min-height:60px; border-radius:8px; border:1px solid #ccc; padding:8px;}
.close-btn {
  position:absolute; top:12px; right:12px;
  background:#E74C3C; color:white; border:none; border-radius:50%;
  width:28px; height:28px; cursor:pointer;
}

/* –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ */
#checkout-section {
  display:none;
  padding:16px;
  max-width:500px;
  margin:20px auto;
  background:#FAF9F6;
  border-radius:12px;
  box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.checkout-form {display:flex; flex-direction:column; gap:12px;}
.checkout-form input, .checkout-form select {padding:8px; border-radius:8px; border:1px solid #ccc; font-size:14px;}
.checkout-form button {background:var(--primary); color:white; border:none; border-radius:12px; padding:10px; font-weight:600; cursor:pointer;}
.checkout-form button:hover {background:var(--primary-hover);}
</style>
</head>
<body>
<header>
  ü•ï –ú–∞–≥–∞–∑–∏–Ω –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤
</header>

<div class="categories" id="category-buttons">
  <button class="active" data-cat="fruits">–§—Ä—É–∫—Ç—ã</button>
  <button data-cat="vegetables">–û–≤–æ—â–∏</button>
</div>
<div class="subcategories" id="subcategory-buttons"></div>

<div class="wrap">
  <div id="catalog"></div>

  <aside class="cart" id="cart">
    <h3>üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>
    <div id="cart-list" class="cart-list"></div>
    <div class="total" id="cart-total">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
    <div class="cart-actions">
      <button id="clear-cart" class="btn btn-clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
      <button id="checkout" class="btn btn-check">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>
  </aside>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞ -->
<div class="modal" id="product-modal">
  <div class="modal-content">
    <button class="close-btn" id="close-modal">√ó</button>
    <h2 id="modal-title"></h2>
    <div class="img-placeholder" style="height:200px;">–§–æ—Ç–æ (–ø–æ–∫–∞)</div>
    <div class="kbju" id="modal-kbju"></div>
    <div class="description" id="modal-desc"></div>
    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É:</label>
    <textarea id="modal-comment" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Å—Ä–µ–¥–Ω–∏–π –∞—Ä–±—É–∑"></textarea>
    <button id="modal-add" class="btn btn-check">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
</div>

<!-- –®–∞–≥ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
<div id="checkout-section">
  <h2>üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
  <form class="checkout-form" id="checkout-form">
    <input type="text" id="cust-name" placeholder="–ò–º—è *" required>
    <input type="tel" id="cust-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω *" required>
    <input type="tel" id="cust-phone2" placeholder="–î–æ–ø. —Ç–µ–ª–µ—Ñ–æ–Ω (–ø–æ –∂–µ–ª–∞–Ω–∏—é)">
    <input type="text" id="cust-city" placeholder="–ì–æ—Ä–æ–¥ *" required>
    <input type="text" id="cust-street" placeholder="–£–ª–∏—Ü–∞ *" required>
    <input type="text" id="cust-house" placeholder="–î–æ–º *" required>
    <input type="text" id="cust-entrance" placeholder="–ü–æ–¥—ä–µ–∑–¥">
    <input type="text" id="cust-floor" placeholder="–≠—Ç–∞–∂">
    <input type="text" id="cust-apartment" placeholder="–ö–≤–∞—Ä—Ç–∏—Ä–∞">
    <select id="delivery-time">
      <option value="asap">–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ</option>
      <option value="custom">–£–∫–∞–∑–∞—Ç—å –≤—Ä–µ–º—è</option>
    </select>
    <input type="time" id="custom-time" style="display:none;">
    <input type="email" id="cust-email" placeholder="–ü–æ—á—Ç–∞ –¥–ª—è —á–µ–∫–∞">
    <select id="payment-method">
      <option value="cash">–ù–∞–ª–∏—á–Ω—ã–µ</option>
      <option value="online">–û–Ω–ª–∞–π–Ω (–∫–∞—Ä—Ç–∞, –°–ë–ü)</option>
    </select>
    <button type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </form>
</div>

<script>
//=== –ê—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç
const products=[
  {name:"–ê—Ä–±—É–∑", price:40, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã", kbju:"–ö:6–≥ –ñ:0–≥ –ë:0–≥", desc:"–ê—Ä–±—É–∑ ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–æ–¥—ã –∏ –≤–∏—Ç–∞–º–∏–Ω–∞ –°."},
  {name:"–ë–∞–Ω–∞–Ω", price:170, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã", kbju:"–ö:22–≥ –ñ:0–≥ –ë:1–≥", desc:"–ë–∞–Ω–∞–Ω –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —ç–Ω–µ—Ä–≥–∏—é –∏ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–¥—Ü–∞."},
  {name:"–ì—Ä—É—à–∞", price:340, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ", kbju:"–ö:15–≥ –ñ:0–≥ –ë:0–≥", desc:"–ì—Ä—É—à–∞ —É–ª—É—á—à–∞–µ—Ç –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ –∏ –Ω–∞—Å—ã—â–∞–µ—Ç –∫–ª–µ—Ç—á–∞—Ç–∫–æ–π."},
  {name:"–ö–∏–≤–∏", price:450, category:"fruits", subcategory:"–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ", kbju:"–ö:10–≥ –ñ:0–≥ –ë:1–≥", desc:"–ö–∏–≤–∏ –±–æ–≥–∞—Ç –≤–∏—Ç–∞–º–∏–Ω–æ–º C, —É–∫—Ä–µ–ø–ª—è–µ—Ç –∏–º–º—É–Ω–∏—Ç–µ—Ç."},
  {name:"–ü–µ—Ä–µ—Ü —á–∏–ª–∏", price:25, category:"vegetables", subcategory:"–ü–µ—Ä—Ü—ã", kbju:"–ö:7–≥ –ñ:0–≥ –ë:1–≥", desc:"–ü–µ—Ä–µ—Ü —á–∏–ª–∏ —Å—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç –º–µ—Ç–∞–±–æ–ª–∏–∑–º –∏ —É–∫—Ä–µ–ø–ª—è–µ—Ç –∏–º–º—É–Ω–∏—Ç–µ—Ç."}
  // —Å—é–¥–∞ –¥–æ–±–∞–≤–ª—è–π –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
];

let cart=[];
let selectedCategory="fruits";
let selectedSubcategory=null;
let selectedProduct=null;

//=== DOM
const catalogEl=document.getElementById('catalog');
const cartListEl=document.getElementById('cart-list');
const cartTotalEl=document.getElementById('cart-total');
const clearBtn=document.getElementById('clear-cart');
const checkoutBtn=document.getElementById('checkout');
const categoryButtons=document.getElementById('category-buttons');
const subcategoryButtons=document.getElementById('subcategory-buttons');

const modal=document.getElementById('product-modal');
const modalTitle=document.getElementById('modal-title');
const modalKbju=document.getElementById('modal-kbju');
const modalDesc=document.getElementById('modal-desc');
const modalComment=document.getElementById('modal-comment');
const modalAdd=document.getElementById('modal-add');
const closeModal=document.getElementById('close-modal');

const checkoutSection=document.getElementById('checkout-section');
const checkoutForm=document.getElementById('checkout-form');
const deliveryTimeSelect=document.getElementById('delivery-time');
const customTimeInput=document.getElementById('custom-time');

//=== –§—É–Ω–∫—Ü–∏–∏
function renderSubcategories(){
  subcategoryButtons.innerHTML='';
  let subs=[];
  if(selectedCategory==='fruits') subs=["–Ø–≥–æ–¥—ã","–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ","–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ"];
  else if(selectedCategory==='vegetables') subs=["–ö–æ—Ä–Ω–µ–ø–ª–æ–¥—ã","–¢–æ–º–∞—Ç—ã –∏ –æ–≥—É—Ä—Ü—ã","–ü–µ—Ä—Ü—ã","–ó–µ–ª–µ–Ω—å"];
  subs.forEach(sub=>{
    const btn=document.createElement('button');
    btn.textContent=sub;
    btn.className=selectedSubcategory===sub?'active':'';
    btn.onclick=()=>{selectedSubcategory=sub; renderSubcategories(); renderCatalog();}
    subcategoryButtons.appendChild(btn);
  });
}

function renderCatalog(){
  catalogEl.innerHTML='';
  let filtered=products.filter(p=>p.category===selectedCategory);
  if(selectedSubcategory) filtered=filtered.filter(p=>p.subcategory===selectedSubcategory);
  filtered.forEach(prod=>{
    const card=document.createElement('div'); card.className='card';
    card.innerHTML=`<div class="img-placeholder">–§–æ—Ç–æ</div><div class="title">${prod.name}</div><div class="price">${prod.price} ‚ÇΩ/–∫–≥</div>`;
    card.onclick=()=>{openModal(prod);}
    catalogEl.appendChild(card);
  });
}

function openModal(prod){
  selectedProduct=prod;
  modalTitle.textContent=prod.name;
  modalKbju.textContent=prod.kbju;
  modalDesc.textContent=prod.desc;
  modalComment.value='';
  modal.style.display='flex';
}

closeModal.onclick=()=>{modal.style.display='none';}

modalAdd.onclick=()=>{
  const qty=1; // –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –≤–≤–æ–¥ –∫–æ–ª-–≤–∞
  const comment=modalComment.value;
  const existing=cart.find(c=>c.name===selectedProduct.name);
  if(existing){existing.qty+=qty; existing.comment=comment; existing.total=existing.qty*selectedProduct.price;}
  else cart.push({name:selectedProduct.name, qty, total:selectedProduct.price, comment});
  renderCart();
  modal.style.display='none';
}

function renderCart(){
  cartListEl.innerHTML='';
  let total=0;
  cart.forEach(item=>{
    total+=item.total;
    const div=document.createElement('div'); div.className='cart-item';
    div.innerHTML=`<div>${item.name} <span style="font-size:12px;">${item.comment}</span></div><div>${item.total} ‚ÇΩ</div><button class="remove" onclick="removeFromCart('${item.name}')">√ó</button>`;
    cartListEl.appendChild(div);
  });
  cartTotalEl.textContent='–ò—Ç–æ–≥–æ: '+total+' ‚ÇΩ';
}

function removeFromCart(name){cart=cart.filter(c=>c.name!==name); renderCart();}

clearBtn.onclick=()=>{cart=[]; renderCart();}

categoryButtons.querySelectorAll('button').forEach(btn=>{
  btn.onclick=()=>{
    categoryButtons.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    selectedCategory=btn.dataset.cat;
    selectedSubcategory=null;
    renderSubcategories();
    renderCatalog();
  }
});

checkoutBtn.onclick=()=>{
  if(cart.length===0){alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!'); return;}
  checkoutSection.style.display='block';
  window.scrollTo({top:checkoutSection.offsetTop, behavior:'smooth'});
}

deliveryTimeSelect.onchange=()=>{customTimeInput.style.display=deliveryTimeSelect.value==='custom'?'block':'none';}

checkoutForm.onsubmit=(e)=>{
  e.preventDefault();
  let name=document.getElementById('cust-name').value;
  let phone=document.getElementById('cust-phone').value;
  let phone2=document.getElementById('cust-phone2').value;
  let city=document.getElementById('cust-city').value;
  let street=document.getElementById('cust-street').value;
  let house=document.getElementById('cust-house').value;
  let entrance=document.getElementById('cust-entrance').value;
  let floor=document.getElementById('cust-floor').value;
  let apt=document.getElementById('cust-apartment').value;
  let email=document.getElementById('cust-email').value;
  let time=deliveryTimeSelect.value==='custom'?customTimeInput.value:'–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ';
  let payment=document.getElementById('payment-method').value;

  let orderText='üõí –í–∞—à –∑–∞–∫–∞–∑:\n\n';
  cart.forEach(item=>{
    orderText+=`${item.name} ‚Äî ${item.qty} —à—Ç ‚Äî ${item.comment} ‚Äî ${item.total} ‚ÇΩ\n`;
  });
  orderText+=`\nüë§ –ò–º—è: ${name}\nüìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}${phone2?'\nüìû –î–æ–ø: '+phone2:''}\nüè† –ê–¥—Ä–µ—Å: ${city}, ${street}, –¥.${house}${entrance?', –ø–æ–¥—ä–µ–∑–¥ '+entrance:''}${floor?', —ç—Ç–∞–∂ '+floor:''}${apt?', –∫–≤ '+apt:''}\n‚úâ –ü–æ—á—Ç–∞: ${email}\n‚è± –î–æ—Å—Ç–∞–≤–∫–∞: ${time}\nüí≥ –û–ø–ª–∞—Ç–∞: ${payment==='cash'?'–ù–∞–ª–∏—á–Ω—ã–µ':'–û–Ω–ª–∞–π–Ω'}`;

  alert(orderText);
}

renderSubcategories();
renderCatalog();
</script>
</body>
</html>
