<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ú–∞–≥–∞–∑–∏–Ω –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤</title>
<style>
:root{
  --accent:#A4DE02;
  --accent-hover:#FF8C42;
  --bg:#FFFFFF;
  --card:#FAF9F6;
  --text:#2E2E2E;
  --text-muted:#666666;
  --border:#E6E6E6;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,Arial,sans-serif;}
body{background:var(--bg); color:var(--text); padding:16px;}
h1{text-align:center;font-family:Poppins,sans-serif;font-weight:700;font-size:42px;margin-bottom:20px;}
.categories, .subcategories{display:flex;gap:12px;justify-content:center;margin-bottom:16px;flex-wrap:wrap;}
.categories button, .subcategories button{
  padding:8px 12px; border:none; border-radius:8px; cursor:pointer; font-weight:600; background:#eee;
}
.categories button.active{background:var(--accent);color:#fff;}
.subcategories button.active{background:var(--accent-hover);color:#fff;}
.wrap{display:grid;grid-template-columns:1fr 340px; gap:20px;align-items:start;}
#catalog{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;}
.card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);display:flex;flex-direction:column;gap:8px;min-height:220px;cursor:pointer;transition:transform .12s;}
.card:hover{transform:scale(1.03);}
.img-placeholder{height:120px;background:linear-gradient(90deg,#f0f0f0,#fafafa);border-radius:10px;display:flex;align-items:center;justify-content:center;color:#9aa6b2;font-size:14px;}
.title{font-weight:600;font-size:16px;height:40px;overflow:hidden;}
.price{color:var(--text-muted);font-size:14px;}
.controls{display:flex;gap:8px;align-items:center;margin-top:auto;}
.qty{display:flex;gap:6px;align-items:center;border-radius:8px;padding:6px;background:#fbfcfd;border:1px solid #e8eef2;}
.qty input[type="number"]{width:70px;border:0;outline:none;text-align:center;font-size:14px;background:transparent;}
.unit-select{padding:6px 8px;border-radius:8px;border:1px solid #e8eef2;background:white;font-size:13px;}
.add-btn{background:var(--accent);color:white;border:0;padding:9px 10px;border-radius:10px;cursor:pointer;font-weight:600;transition:0.12s;}
.add-btn:hover{background:var(--accent-hover);}
.cart{position:sticky;top:18px;background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(0,0,0,0.06);max-height:80vh;overflow:auto;}
.cart h3{text-align:center;margin-bottom:8px;}
.cart-list{display:flex;flex-direction:column;gap:8px;}
.cart-item{display:flex;justify-content:space-between;align-items:center;gap:8px;border-radius:8px;padding:8px;background:#fbfdff;border:1px solid #eef6f2;font-size:14px;}
.cart-item .left{display:flex;flex-direction:column;gap:4px;}
.remove{background:#fdecea;color:#b82c1a;border:0;padding:6px 8px;border-radius:8px;cursor:pointer;}
.total{margin-top:10px;text-align:right;font-weight:700;font-size:16px;}
.cart-actions{display:flex;gap:8px;margin-top:10px;}
.btn{flex:1;padding:10px;border-radius:10px;border:0;cursor:pointer;font-weight:700;}
.btn-clear{background:#f44336;color:white;}
.btn-check{background:var(--accent);color:white;}
.muted{color:#666666;font-size:13px;}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞ */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);justify-content:center;align-items:center;z-index:1000;}
.modal-content{background:var(--card);padding:20px;border-radius:12px;max-width:400px;width:90%;position:relative;display:flex;flex-direction:column;gap:12px;}
.modal-close{position:absolute;top:10px;right:10px;font-size:20px;cursor:pointer;}
.modal h2{margin-bottom:8px;font-family:Poppins,sans-serif;}
.modal .desc{font-size:14px;color:var(--text-muted);}
.modal .kbtju{font-size:14px;font-weight:600;}
.modal .comment input{width:100%;padding:6px;border-radius:6px;border:1px solid #ccc;}
.modal .add-modal-btn{background:var(--accent);color:white;border:0;padding:10px;border-radius:8px;cursor:pointer;font-weight:600;transition:0.12s;}
.modal .add-modal-btn:hover{background:var(--accent-hover);}

/* –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ */
#checkout-section{display:none;margin-top:20px;}
#checkout-section h2{text-align:center;margin-bottom:12px;}
.checkout-form{display:flex;flex-direction:column;gap:12px;max-width:400px;margin:0 auto;}
.checkout-form input, .checkout-form select{padding:8px;border-radius:8px;border:1px solid #ccc;font-size:14px;width:100%;}
.checkout-form label{font-weight:600;font-size:14px;}
.checkout-form button{padding:10px;background:var(--accent);color:white;border:none;border-radius:10px;cursor:pointer;font-weight:600;transition:0.12s;}
.checkout-form button:hover{background:var(--accent-hover);}

@media (max-width:980px){.wrap{grid-template-columns:1fr}.cart{position:static;}}
</style>
</head>
<body>
<h1>ü•ï –ú–∞–≥–∞–∑–∏–Ω –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤</h1>

<div class="categories" id="category-buttons">
  <button class="active" data-cat="fruits">–§—Ä—É–∫—Ç—ã</button>
  <button data-cat="vegetables">–û–≤–æ—â–∏</button>
</div>
<div class="subcategories" id="subcategory-buttons"></div>

<div class="wrap">
  <div id="catalog-wrap">
    <div id="catalog"></div>
  </div>
  <aside class="cart" id="cart">
    <h3>üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>
    <div id="cart-list" class="cart-list"></div>
    <div class="total" id="cart-total">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
    <div class="cart-actions">
      <button id="clear-cart" class="btn btn-clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
      <button id="checkout" class="btn btn-check">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>
    <div style="margin-top:10px;font-size:13px;color:#667f87;text-align:center">
      –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º ‚Äî –∑–∞–∫–∞–∑ –ø–æ–∫–∞ —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    </div>
  </aside>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ–≤–∞—Ä–∞ -->
<div class="modal" id="product-modal">
  <div class="modal-content">
    <span class="modal-close" id="modal-close">&times;</span>
    <h2 id="modal-title"></h2>
    <div class="desc" id="modal-desc"></div>
    <div class="kbtju" id="modal-kbtju"></div>
    <div class="comment">
      <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
      <input type="text" id="modal-comment" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Å—Ä–µ–¥–Ω–∏–π –∞—Ä–±—É–∑">
    </div>
    <button class="add-modal-btn" id="modal-add-btn">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
</div>

<!-- –®–∞–≥ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
<div id="checkout-section">
  <h2>üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
  <form class="checkout-form" id="checkout-form">
    <label>–ò–º—è *</label>
    <input type="text" id="cust-name" required>
    
    <label>–¢–µ–ª–µ—Ñ–æ–Ω *</label>
    <input type="tel" id="cust-phone" required>
    
    <label>–î–æ–ø. —Ç–µ–ª–µ—Ñ–æ–Ω</label>
    <input type="tel" id="cust-phone2">
    
    <label>–ì–æ—Ä–æ–¥ *</label>
    <input type="text" id="cust-city" required>
    
    <label>–£–ª–∏—Ü–∞ *</label>
    <input type="text" id="cust-street" required>
    
    <label>–î–æ–º *</label>
    <input type="text" id="cust-house" required>
    
    <label>–ü–æ–¥—ä–µ–∑–¥</label>
    <input type="text" id="cust-entrance">
    
    <label>–≠—Ç–∞–∂</label>
    <input type="text" id="cust-floor">
    
    <label>–ö–≤–∞—Ä—Ç–∏—Ä–∞</label>
    <input type="text" id="cust-apartment">
    
    <label>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
    <select id="delivery-time">
      <option value="asap">–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ</option>
      <option value="custom">–£–∫–∞–∑–∞—Ç—å –≤—Ä–µ–º—è</option>
    </select>
    <input type="time" id="custom-time" style="display:none;">
    
    <label>–ü–æ—á—Ç–∞ –¥–ª—è —á–µ–∫–∞</label>
    <input type="email" id="cust-email">
    
    <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *</label>
    <select id="payment-method" required>
      <option value="cash">–ù–∞–ª–∏—á–Ω—ã–µ</option>
      <option value="online">–û–Ω–ª–∞–π–Ω (–∫–∞—Ä—Ç–∞ / –°–ë–ü)</option>
    </select>
    
    <button type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </form>
</div>

<script>
//=== –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
const products=[
  {name:"–ê—Ä–±—É–∑", price:40, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã", desc:"–°–æ—á–Ω—ã–π –∏ —Å–ª–∞–¥–∫–∏–π, –±–æ–≥–∞—Ç –≤–∏—Ç–∞–º–∏–Ω–æ–º C –∏ –∫–ª–µ—Ç—á–∞—Ç–∫–æ–π.", kbtju:"–ö–ë–ñ–£ –Ω–∞ 100–≥: 30 –∫–∫–∞–ª, 0.6–≥ –±–µ–ª–∫–∞, 0.1–≥ –∂–∏—Ä–∞, 8–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤", comment:"–°—Ä–µ–¥–Ω–∏–π –∞—Ä–±—É–∑"},
  {name:"–ë–∞–Ω–∞–Ω", price:170, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã", desc:"–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–∞–ª–∏—è –∏ —ç–Ω–µ—Ä–≥–∏–∏, —É–ª—É—á—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å–µ—Ä–¥—Ü–∞.", kbtju:"–ö–ë–ñ–£ –Ω–∞ 100–≥: 89 –∫–∫–∞–ª, 1.1–≥ –±–µ–ª–∫–∞, 0.3–≥ –∂–∏—Ä–∞, 23–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤", comment:"–û–¥–∏–Ω –∫—Ä—É–ø–Ω—ã–π –±–∞–Ω–∞–Ω"},
  {name:"–î—ã–Ω—è —Ç–æ—Ä–ø–µ–¥–∞ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω", price:80, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã", desc:"–°–ª–∞–¥–∫–∞—è –∏ —Å–æ—á–Ω–∞—è, —É–≤–ª–∞–∂–Ω—è–µ—Ç –∏ –Ω–∞—Å—ã—â–∞–µ—Ç –≤–∏—Ç–∞–º–∏–Ω–æ–º A.", kbtju:"–ö–ë–ñ–£ –Ω–∞ 100–≥: 34 –∫–∫–∞–ª, 0.8–≥ –±–µ–ª–∫–∞, 0.2–≥ –∂–∏—Ä–∞, 8.2–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤", comment:"–°—Ä–µ–¥–Ω—è—è –¥—ã–Ω—è"},
  {name:"–î—ã–Ω—è –∫–æ–ª—Ö–æ–∑–Ω–∏—Ü–∞", price:80, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã", desc:"–õ–µ–≥–∫–∞—è –∏ –∞—Ä–æ–º–∞—Ç–Ω–∞—è, –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è –∫–æ–∂–∏ –∏ –∑—Ä–µ–Ω–∏—è.", kbtju:"–ö–ë–ñ–£ –Ω–∞ 100–≥: 36 –∫–∫–∞–ª, 0.7–≥ –±–µ–ª–∫–∞, 0.1–≥ –∂–∏—Ä–∞, 8.5–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤", comment:"–°—Ä–µ–¥–Ω—è—è –¥—ã–Ω—è"},
  {name:"–ö–∏–≤–∏", price:450, category:"fruits", subcategory:"–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ", desc:"–°–æ–¥–µ—Ä–∂–∏—Ç –≤–∏—Ç–∞–º–∏–Ω C, —É–∫—Ä–µ–ø–ª—è–µ—Ç –∏–º–º—É–Ω–∏—Ç–µ—Ç –∏ —É–ª—É—á—à–∞–µ—Ç –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ.", kbtju:"–ö–ë–ñ–£ –Ω–∞ 100–≥: 61 –∫–∫–∞–ª, 1.1–≥ –±–µ–ª–∫–∞, 0.5–≥ –∂–∏—Ä–∞, 15–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤"},
  // –î–æ–±–∞–≤—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏...
];

//=== –ö–æ—Ä–∑–∏–Ω–∞
let cart=[];
let selectedCategory="fruits";
let selectedSubcategory=null;

//=== DOM —ç–ª–µ–º–µ–Ω—Ç—ã
const catalogEl=document.getElementById('catalog');
const cartListEl=document.getElementById('cart-list');
const cartTotalEl=document.getElementById('cart-total');
const clearBtn=document.getElementById('clear-cart');
const checkoutBtn=document.getElementById('checkout');
const categoryButtons=document.getElementById('category-buttons');
const subcategoryButtons=document.getElementById('subcategory-buttons');
const catalogWrap=document.getElementById('catalog-wrap');
const checkoutSection=document.getElementById('checkout-section');

const modal=document.getElementById('product-modal');
const modalClose=document.getElementById('modal-close');
const modalTitle=document.getElementById('modal-title');
const modalDesc=document.getElementById('modal-desc');
const modalKbtju=document.getElementById('modal-kbtju');
const modalComment=document.getElementById('modal-comment');
const modalAddBtn=document.getElementById('modal-add-btn');

function idify(name){return name.replace(/\s+/g,'_').replace(/[^\w\-]/g,'');}
function rub(v){return Math.round(v)+' ‚ÇΩ';}

//=== –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
function renderSubcategories(){
  subcategoryButtons.innerHTML='';
  let subs=[];
  if(selectedCategory==='fruits') subs=["–Ø–≥–æ–¥—ã","–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ","–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ"];
  else if(selectedCategory==='vegetables') subs=["–ö–æ—Ä–Ω–µ–ø–ª–æ–¥—ã","–¢–æ–º–∞—Ç—ã –∏ –æ–≥—É—Ä—Ü—ã","–ü–µ—Ä—Ü—ã","–ó–µ–ª–µ–Ω—å","–ü—Ä–æ—á–∏–µ –æ–≤–æ—â–∏"];
  subs.forEach(sub=>{
    const btn=document.createElement('button');
    btn.textContent=sub;
    btn.className=selectedSubcategory===sub?'active':'';
    btn.onclick=()=>{
      selectedSubcategory=sub; renderSubcategories(); renderCatalog();
    };
    subcategoryButtons.appendChild(btn);
  });
}

//=== –ö–∞—Ç–∞–ª–æ–≥
function renderCatalog(){
  catalogEl.innerHTML='';
  let filtered=products.filter(p=>p.category===selectedCategory);
  if(selectedSubcategory) filtered=filtered.filter(p=>p.subcategory===selectedSubcategory);
  filtered.forEach(prod=>{
    const id=idify(prod.name);
    const card=document.createElement('div'); card.className='card';
    card.innerHTML=`<div class="img-placeholder">–§–æ—Ç–æ (–ø–æ–∫–∞)</div>
      <div class="title">${prod.name}</div>
      <div class="price muted">${prod.price} ‚ÇΩ/–∫–≥</div>`;
    card.onclick=()=>openModal(prod);
    catalogEl.appendChild(card);
  });
}

//=== –ú–æ–¥–∞–ª–∫–∞
function openModal(prod){
  modalTitle.textContent=prod.name;
  modalDesc.textContent=prod.desc;
  modalKbtju.textContent=prod.kbtju;
  modalComment.value=prod.comment||"";
  modal.style.display='flex';

  modalAddBtn.onclick=()=>{
    let qty=1;
    cart.push({name:prod.name,qty,total:prod.price*qty,comment:modalComment.value});
    renderCart();
    modal.style.display='none';
  }
}
modalClose.onclick=()=>{modal.style.display='none';}
window.onclick=(e)=>{if(e.target===modal) modal.style.display='none';}

//=== –ö–æ—Ä–∑–∏–Ω–∞
function renderCart(){
  cartListEl.innerHTML='';
  let total=0;
  cart.forEach(item=>{
    total+=item.total;
    const div=document.createElement('div'); div.className='cart-item';
    div.innerHTML=`<div class="left">${item.name} <span class="muted">${item.comment}</span></div>
      <div>${rub(item.total)}</div>
      <button class="remove" onclick="removeFromCart('${item.name}')">√ó</button>`;
    cartListEl.appendChild(div);
  });
  cartTotalEl.textContent='–ò—Ç–æ–≥–æ: '+rub(total);
}

function removeFromCart(name){cart=cart.filter(c=>c.name!==name); renderCart();}
clearBtn.onclick=()=>{cart=[]; renderCart();}

//=== –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
categoryButtons.querySelectorAll('button').forEach(btn=>{
  btn.onclick=()=>{
    categoryButtons.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    selectedCategory=btn.dataset.cat;
    selectedSubcategory=null;
    renderSubcategories();
    renderCatalog();
  }
});

//=== –ö–Ω–æ–ø–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
checkoutBtn.onclick = () => {
  if(cart.length===0){alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!'); return;}
  catalogWrap.style.display='none';
  checkoutSection.style.display='block';
  window.scrollTo({top:0,behavior:'smooth'});
};

const checkoutForm=document.getElementById('checkout-form');
const deliveryTimeSelect=document.getElementById('delivery-time');
const customTimeInput=document.getElementById('custom-time');
deliveryTimeSelect.onchange=()=>{customTimeInput.style.display=deliveryTimeSelect.value==='custom'?'block':'none';}

checkoutForm.onsubmit=(e)=>{
  e.preventDefault();
  const name=document.getElementById('cust-name').value;
  const phone=document.getElementById('cust-phone').value;
  const phone2=document.getElementById('cust-phone2').value;
  const city=document.getElementById('cust-city').value;
  const street=document.getElementById('cust-street').value;
  const house=document.getElementById('cust-house').value;
  const entrance=document.getElementById('cust-entrance').value;
  const floor=document.getElementById('cust-floor').value;
  const apt=document.getElementById('cust-apartment').value;
  const email=document.getElementById('cust-email').value;
  let time=deliveryTimeSelect.value==='custom'?customTimeInput.value:'–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ';
  const payment=document.getElementById('payment-method').value;

  let orderText='üõí –í–∞—à –∑–∞–∫–∞–∑:\n\n';
  cart.forEach(item=>{
    orderText+=`${item.name} ‚Äî ${item.comment} ‚Äî ${rub(item.total)}\n`;
  });
  orderText+=`\nüë§ –ò–º—è: ${name}\nüìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}${phone2?'\nüìû –î–æ–ø: '+phone2:''}\nüè† –ê–¥—Ä–µ—Å: ${city}, ${street}, –¥.${house}${entrance?', –ø–æ–¥—ä–µ–∑–¥ '+entrance:''}${floor?', —ç—Ç–∞–∂ '+floor:''}${apt?', –∫–≤ '+apt:''}\nüìß –ü–æ—á—Ç–∞: ${email}\n‚è± –î–æ—Å—Ç–∞–≤–∫–∞: ${time}\nüí≥ –û–ø–ª–∞—Ç–∞: ${payment==='cash'?'–ù–∞–ª–∏—á–Ω—ã–µ':'–û–Ω–ª–∞–π–Ω'}`;
  
  alert(orderText);
};

renderSubcategories();
renderCatalog();
</script>
</body>
</html>
