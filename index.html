<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–°–≤–µ–∂–∏–µ –æ–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã ‚Äî –º–∞–≥–∞–∑–∏–Ω</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@500;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --white: #FFFFFF;
  --card-bg: #FAF9F6;
  --brand: #A4DE02;       /* –ª–∞–π–º */
  --cta: #FF8C42;         /* –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π */
  --text: #2E2E2E;        /* –≥—Ä–∞—Ñ–∏—Ç */
  --muted: #666666;
  --border: #E6E6E6;
  --success: #5CB85C;
  --danger: #E74C3C;
  --shadow: 0 2px 8px rgba(0,0,0,0.05);
  --container: 1200px;
}

/* Reset & base */
*{box-sizing:border-box}
html,body{height:100%;background:var(--white);margin:0;font-family:Inter,Arial,Helvetica,sans-serif;color:var(--text);-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
button{font-family:inherit}

/* Layout container */
.container{
  max-width:var(--container);
  margin:0 auto;
  padding:32px;
}

/* Header */
.header{
  position:sticky;top:0;z-index:30;background:rgba(255,255,255,0.98);backdrop-filter:blur(4px);
  border-bottom:1px solid var(--border);
}
.header-inner{display:flex;align-items:center;justify-content:space-between;max-width:var(--container);margin:0 auto;padding:16px 32px;gap:20px}
.logo{display:flex;align-items:center;gap:12px}
.logo .mark{
  width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--brand),#7cc900);
  display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(164,222,2,0.12);
}
.logo .mark svg{width:22px;height:22px;fill:#fff}
.logo h4{font-family:Poppins,Inter;font-weight:700;font-size:18px;margin:0;color:var(--text)}

/* Navigation */
.nav{display:flex;gap:18px;align-items:center}
.nav a{font-family:Inter;font-weight:600;color:var(--text);font-size:16px;padding:8px 10px;border-radius:8px}
.nav a:hover{background:var(--card-bg)}
.header-actions{display:flex;gap:12px;align-items:center}

/* Hero */
.hero{
  max-width:var(--container);
  margin:18px auto 28px;
  padding:28px;
  background:var(--card-bg);
  border-radius:16px;
  display:flex;
  gap:28px;
  align-items:center;
  box-shadow:var(--shadow);
}
.hero-left{flex:1;min-width:320px}
.hero h1{font-family:Poppins;font-weight:800;font-size:40px;margin:0 0 10px;color:var(--text);line-height:1.04}
.hero p{font-size:18px;color:var(--muted);margin:0 0 18px}
.hero-cta{display:flex;gap:12px;align-items:center}
.btn-cta{
  background:var(--cta);color:#fff;border:none;padding:14px 20px;border-radius:12px;font-weight:700;font-family:Poppins;box-shadow:0 6px 18px rgba(255,140,66,0.12);cursor:pointer;transition:all .18s ease
}
.btn-cta:hover{transform:translateY(-3px);background: #ff7a18;}
.btn-secondary{background:transparent;border:1px solid var(--border);padding:12px 16px;border-radius:10px;color:var(--text);cursor:pointer}

/* Hero image */
.hero-right{width:420px;max-width:40%}
.hero-image{
  border-radius:14px;overflow:hidden;height:220px;background:linear-gradient(180deg,#fff,#f6f5f3);
  display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow)
}
.hero-image img{width:100%;height:100%;object-fit:cover;display:block}

/* Main area */
.main{max-width:var(--container);margin:0 auto;padding:0 32px 80px}

/* Filters */
.filters{display:flex;gap:12px;align-items:center;margin:20px 0;flex-wrap:wrap}
.filter-btn{
  padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:transparent;font-weight:600;cursor:pointer;color:var(--text)
}
.filter-btn.active{background:var(--brand);color:#fff;box-shadow:0 8px 20px rgba(164,222,2,0.12);border-color:transparent}

/* Grid & card */
.grid{
  display:grid;
  grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
  gap:20px;
}
.card{
  background:var(--card-bg);
  border-radius:12px;
  box-shadow:var(--shadow);
  padding:14px;
  display:flex;
  flex-direction:column;
  gap:10px;
  width:100%;
  height:380px; /* card size */
  transition:transform .18s ease,box-shadow .18s ease;
  border:1px solid transparent;
}
.card:hover{transform:scale(1.03);box-shadow:0 8px 28px rgba(0,0,0,0.08);border-color:rgba(0,0,0,0.03)}
.card .photo{height:70%;border-radius:10px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center}
.card .photo img{width:100%;height:100%;object-fit:cover;display:block;opacity:0;transition:opacity .45s ease}
.card .info{display:flex;flex-direction:column;gap:6px;flex:1}
.card .name{font-family:Poppins;font-weight:600;font-size:16px;color:var(--text)}
.card .desc{font-size:13px;color:var(--muted);min-height:34px}
.card .price{font-weight:700;color:var(--text);font-size:16px}
.card .actions{display:flex;justify-content:space-between;align-items:center;gap:8px}
.add-to-cart{
  background:var(--brand);color:#fff;border:0;padding:10px 12px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(164,222,2,0.12);
  transition:background .15s ease,transform .12s;
}
.add-to-cart:hover{background:var(--cta);transform:translateY(-2px)}
.small{font-size:13px;color:var(--muted)}

/* Micro animation (check) */
.fly-check{
  position:relative;
}
.checkmark{
  position:absolute;right:8px;top:-8px;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--success);color:#fff;font-weight:700;opacity:0;transform:scale(.6);transition:all .28s ease;
}

/* Cart panel (right overlay) */
.cart-panel{
  position:fixed;right:20px;top:90px;width:320px;background:var(--white);border-radius:12px;box-shadow:0 12px 36px rgba(0,0,0,0.12);padding:14px;z-index:40;border:1px solid var(--border);
}
.cart-panel h4{margin:0 0 10px;font-family:Poppins}
.cart-items{max-height:360px;overflow:auto;display:flex;flex-direction:column;gap:8px;padding-right:6px}
.cart-row{display:flex;align-items:center;gap:8px;justify-content:space-between;background:#fbfbfb;padding:8px;border-radius:8px;border:1px solid var(--border)}
.cart-row .meta{display:flex;gap:8px;align-items:center}
.cart-row img{width:44px;height:44px;object-fit:cover;border-radius:8px}
.cart-row .info{display:flex;flex-direction:column}
.cart-total{display:flex;justify-content:space-between;align-items:center;margin-top:10px;font-weight:800;font-size:16px}
.cart-actions{display:flex;gap:8px;margin-top:12px}
.cart-actions .btn{padding:11px;border-radius:12px;border:0;cursor:pointer;font-weight:700}
.btn-checkout{background:var(--brand);color:#fff}
.btn-checkout:hover{background:var(--cta)}
.btn-clear{background:#f2f2f2;color:var(--text)}

/* Checkout section (in-page) */
.checkout-page{max-width:900px;margin:20px auto;padding:20px;background:var(--card-bg);border-radius:12px;box-shadow:var(--shadow);display:none}
.checkout-page.show{display:block}

/* Footer */
.footer{max-width:var(--container);margin:40px auto 80px;padding:24px;text-align:center;color:var(--muted);font-size:14px}

/* Mobile specific */
@media (max-width:760px){
  .header-inner{padding:12px}
  .hero{flex-direction:column;padding:18px}
  .hero-right{width:100%}
  .wrap{padding:0 16px}
  .cart-panel{right:10px;top:auto;bottom:80px;width:90%;left:5%;transform:none}
  .btn-cta{width:160px}
  /* Fixed CTA bottom */
  .mobile-cta{position:fixed;left:16px;right:16px;bottom:16px;z-index:60;background:linear-gradient(90deg,var(--brand),#8fd300);color:#fff;padding:14px;border-radius:14px;text-align:center;font-weight:800;box-shadow:0 10px 28px rgba(0,0,0,0.12)}
}

/* small niceties */
.separator{height:1px;background:var(--border);margin:12px 0;border-radius:2px}
.fade-in{animation:fadeIn .45s ease both}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>

<!-- Header -->
<header class="header">
  <div class="header-inner">
    <div class="logo">
      <div class="mark" aria-hidden>
        <!-- Leaf icon -->
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C8 6 4 6 2 8c2 2 2 6 6 10s8 6 10 6c-2-6 0-12-6-22z"/></svg>
      </div>
      <h4>–§–µ—Ä–º–∞Fresh</h4>
    </div>

    <nav class="nav" aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
      <a href="#">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="#">–ö–∞—Ç–∞–ª–æ–≥</a>
      <a href="#">–û –Ω–∞—Å</a>
      <a href="#">–î–æ—Å—Ç–∞–≤–∫–∞</a>
      <a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    </nav>

    <div class="header-actions">
      <button id="open-cart" title="–û—Ç–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É" style="background:transparent;border:0;cursor:pointer;">
        <span style="display:inline-flex;align-items:center;gap:8px;font-weight:700;color:var(--brand)">üõí <span id="cart-count">0</span></span>
      </button>
    </div>
  </div>
</header>

<!-- Hero -->
<section class="hero container">
  <div class="hero-left">
    <h1>–°–≤–µ–∂–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã ‚Äî –ø—Ä—è–º–æ –∫ –≤–∞–º –¥–æ–º–æ–π</h1>
    <p>–î–æ—Å—Ç–∞–≤–∏–º –∑–∞ 60 –º–∏–Ω—É—Ç –∏–∑ —Ñ–µ—Ä–º–µ—Ä—Å–∫–∏—Ö —Ö–æ–∑—è–π—Å—Ç–≤. –°–≤–µ–∂–µ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å.</p>
    <div class="hero-cta">
      <button class="btn-cta" id="hero-order">–ó–∞–∫–∞–∑–∞—Ç—å —Å–µ–π—á–∞—Å</button>
      <button class="btn-secondary" id="view-catalog">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥</button>
    </div>
  </div>
  <div class="hero-right">
    <div class="hero-image">
      <img src="https://images.unsplash.com/photo-1518976024611-6d9b0b0b1f7f?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=0a9c9e3b9a95f1b8ad1b" alt="–°–≤–µ–∂–∏–µ —Ñ—Ä—É–∫—Ç—ã" style="width:100%;height:100%;object-fit:cover">
    </div>
  </div>
</section>

<!-- Main content -->
<main class="main container">
  <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
    <div style="min-width:260px">
      <div class="filters" id="filters">
        <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
        <button class="filter-btn" data-filter="vegetables">–û–≤–æ—â–∏</button>
        <button class="filter-btn" data-filter="fruits">–§—Ä—É–∫—Ç—ã</button>
        <button class="filter-btn" data-filter="sets">–°–µ—Ç—ã</button>
        <button class="filter-btn" data-filter="promo">–ê–∫—Ü–∏–∏</button>
      </div>
    </div>
    <div style="margin-left:auto" class="small">–ü–æ–∫–∞–∑–∞–Ω–æ <span id="shown-count">0</span> —Ç–æ–≤–∞—Ä–æ–≤</div>
  </div>

  <div class="wrap" style="margin-top:12px">
    <div id="catalog-wrap">
      <div id="catalog" class="grid"></div>
      <div class="separator"></div>
      <!-- In-page checkout section (appears instead of catalog when user goes to checkout) -->
      <div id="checkout-page" class="checkout-page" style="display:none">
        <h2 style="font-family:Poppins">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
        <form id="checkout-form" class="checkout-form">
          <label>–ò–º—è *</label><input id="cust-name" required>
          <label>–¢–µ–ª–µ—Ñ–æ–Ω *</label><input id="cust-phone" required>
          <label>–î–æ–ø. —Ç–µ–ª–µ—Ñ–æ–Ω</label><input id="cust-phone2">
          <label>–ì–æ—Ä–æ–¥ *</label><input id="cust-city" required>
          <label>–£–ª–∏—Ü–∞ *</label><input id="cust-street" required>
          <label>–î–æ–º *</label><input id="cust-house" required>
          <label>–ü–æ–¥—ä–µ–∑–¥</label><input id="cust-entrance">
          <label>–≠—Ç–∞–∂</label><input id="cust-floor">
          <label>–ö–≤–∞—Ä—Ç–∏—Ä–∞</label><input id="cust-apartment">
          <label>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
          <select id="delivery-time">
            <option value="asap">–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ</option>
            <option value="custom">–£–∫–∞–∑–∞—Ç—å –≤—Ä–µ–º—è</option>
          </select>
          <input type="time" id="custom-time" style="display:none">
          <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *</label>
          <select id="payment-method">
            <option value="cash">–ù–∞–ª–∏—á–Ω—ã–µ</option>
            <option value="online">–û–Ω–ª–∞–π–Ω (–∫–∞—Ä—Ç–∞, –°–ë–ü)</option>
          </select>
          <div style="display:flex;gap:12px;margin-top:12px">
            <button class="btn btn-checkout" type="submit" style="background:var(--brand);color:#fff;border-radius:12px;padding:12px 16px;border:0">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
            <button id="back-to-catalog" type="button" class="btn btn-clear" style="background:#f2f2f2;border-radius:12px;padding:12px 16px">–ù–∞–∑–∞–¥</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Cart panel -->
    <aside id="cart-panel" class="cart-panel" aria-hidden="true" style="display:none">
      <h4>–ö–æ—Ä–∑–∏–Ω–∞ <small id="cart-items-count" style="color:var(--muted);font-weight:600">(<span id="cart-count-2">0</span>)</small></h4>
      <div class="cart-items" id="cart-items"></div>
      <div class="cart-total"><span>–ò—Ç–æ–≥–æ</span><span id="cart-sum">0 ‚ÇΩ</span></div>
      <div class="cart-actions">
        <button id="clear-cart" class="btn btn-clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
        <button id="goto-checkout" class="btn btn-checkout" style="background:var(--brand);color:#fff">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
      </div>
    </aside>
  </div>
</main>

<!-- Mobile CTA -->
<div id="mobile-cta" class="mobile-cta" style="display:none">–ó–∞–∫–∞–∑–∞—Ç—å —Å–µ–π—á–∞—Å ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥</div>

<footer class="footer">
  ¬© –§–µ—Ä–º–∞Fresh ‚Äî –°–≤–µ–∂–µ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å.
</footer>

<script>
/* ====== Data (full assortment) ======
   –Ø –¥–æ–±–∞–≤–∏–ª –æ—Å–Ω–æ–≤–Ω–æ–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å/–ø—Ä–∞–≤–∏—Ç—å */
const products = [
  ["üçâ –ê—Ä–±—É–∑ ‚Äî 40‚ÇΩ/–∫–≥", "–ê—Ä–±—É–∑", 40, "fruits"],
  ["üçê –ì—Ä—É—à–∞ ‚Äî 340‚ÇΩ/–∫–≥", "–ì—Ä—É—à–∞", 340, "fruits"],
  ["üçä –ê–ø–µ–ª—å—Å–∏–Ω ‚Äî 220‚ÇΩ/–∫–≥", "–ê–ø–µ–ª—å—Å–∏–Ω", 220, "fruits"],
  ["üçà –î—ã–Ω—è —Ç–æ—Ä–ø–µ–¥–∞ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω ‚Äî 80‚ÇΩ/–∫–≥", "–î—ã–Ω—è —Ç–æ—Ä–ø–µ–¥–∞ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω", 80, "fruits"],
  ["üçà –î—ã–Ω—è –∫–æ–ª—Ö–æ–∑–Ω–∏—Ü–∞ ‚Äî 80‚ÇΩ/–∫–≥", "–î—ã–Ω—è –∫–æ–ª—Ö–æ–∑–Ω–∏—Ü–∞", 80, "fruits"],
  ["üçá –í–∏–Ω–æ–≥—Ä–∞–¥ –∑–µ–ª–µ–Ω—ã–π (–±–µ–∑ –∫–æ—Å—Ç–æ—á–µ–∫) ‚Äî 320‚ÇΩ/–∫–≥", "–í–∏–Ω–æ–≥—Ä–∞–¥ –∑–µ–ª–µ–Ω—ã–π (–±–µ–∑ –∫–æ—Å—Ç–æ—á–µ–∫)", 320, "fruits"],
  ["üçá –í–∏–Ω–æ–≥—Ä–∞–¥ —Ç–µ–º–Ω—ã–π (–±–µ–∑ –∫–æ—Å—Ç–æ—á–µ–∫) ‚Äî 320‚ÇΩ/–∫–≥", "–í–∏–Ω–æ–≥—Ä–∞–¥ —Ç–µ–º–Ω—ã–π (–±–µ–∑ –∫–æ—Å—Ç–æ—á–µ–∫)", 320, "fruits"],
  ["üçá –í–∏–Ω–æ–≥—Ä–∞–¥ —á–µ—Ä–Ω—ã–π (–ú–µ—Ä—Å–µ–¥–µ—Å) ‚Äî 300‚ÇΩ/–∫–≥", "–í–∏–Ω–æ–≥—Ä–∞–¥ —á–µ—Ä–Ω—ã–π (–ú–µ—Ä—Å–µ–¥–µ—Å)", 300, "fruits"],
  ["üçë –ù–µ–∫—Ç–∞—Ä–∏–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∫—Ä–∞—Å–Ω—ã–π ‚Äî 170‚ÇΩ/–∫–≥", "–ù–µ–∫—Ç–∞—Ä–∏–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∫—Ä–∞—Å–Ω—ã–π", 170, "fruits"],
  ["üçë –ù–µ–∫—Ç–∞—Ä–∏–Ω –¢—É—Ä—Ü–∏—è ‚Äî 350‚ÇΩ/–∫–≥", "–ù–µ–∫—Ç–∞—Ä–∏–Ω –¢—É—Ä—Ü–∏—è", 350, "fruits"],
  ["üçë –ù–µ–∫—Ç–∞—Ä–∏–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∂–µ–ª—Ç—ã–π (–≤–∫—É—Å –ª–∏–º–æ–Ω) ‚Äî 250‚ÇΩ/–∫–≥", "–ù–µ–∫—Ç–∞—Ä–∏–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∂–µ–ª—Ç—ã–π (–≤–∫—É—Å –ª–∏–º–æ–Ω)", 250, "fruits"],
  ["üçë –ù–µ–∫—Ç–∞—Ä–∏–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∑–µ–ª–µ–Ω—ã–π ‚Äî 190‚ÇΩ/–∫–≥", "–ù–µ–∫—Ç–∞—Ä–∏–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∑–µ–ª–µ–Ω—ã–π", 190, "fruits"],
  ["üçå –ë–∞–Ω–∞–Ω ‚Äî 170‚ÇΩ/–∫–≥", "–ë–∞–Ω–∞–Ω", 170, "fruits"],
  ["ü•î –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ß—É–≤–∞—à–∏—è ‚Äî 45‚ÇΩ/–∫–≥", "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ß—É–≤–∞—à–∏—è", 45, "vegetables"],
  ["ü•î –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä ‚Äî 45‚ÇΩ/–∫–≥", "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä", 45, "vegetables"],
  ["ü•ï –ú–æ—Ä–∫–æ–≤—å –í–æ–ª–≥–æ–≥—Ä–∞–¥ ‚Äî 45‚ÇΩ/–∫–≥", "–ú–æ—Ä–∫–æ–≤—å –í–æ–ª–≥–æ–≥—Ä–∞–¥", 45, "vegetables"],
  ["üßÖ –õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π –í–æ–ª–≥–æ–≥—Ä–∞–¥ ‚Äî 45‚ÇΩ/–∫–≥", "–õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π –í–æ–ª–≥–æ–≥—Ä–∞–¥", 45, "vegetables"],
  ["üå± –õ—É–∫ –∑–µ–ª–µ–Ω—ã–π ‚Äî 350‚ÇΩ/–∫–≥", "–õ—É–∫ –∑–µ–ª–µ–Ω—ã–π", 350, "vegetables"],
  ["üå± –£–∫—Ä–æ–ø, –ø–µ—Ç—Ä—É—à–∫–∞ ‚Äî 350‚ÇΩ/–∫–≥", "–£–∫rop, –ø–µ—Ç—Ä—É—à–∫–∞", 350, "vegetables"],
  ["üå± –ö–∏–Ω–∑–∞ ‚Äî 440‚ÇΩ/–∫–≥", "–ö–∏–Ω–∑–∞", 440, "vegetables"],
  ["üå± –ë–∞–∑–µ–ª–∏–∫ ‚Äî 50‚ÇΩ/–ø—É—á–æ–∫", "–ë–∞–∑–µ–ª–∏–∫ (–ø—É—á–æ–∫)", 50, "vegetables"],
  ["üßÑ –ß–µ—Å–Ω–æ–∫ –¢–∞—à–∫–µ–Ω—Ç ‚Äî 400‚ÇΩ/–∫–≥", "–ß–µ—Å–Ω–æ–∫ –¢–∞—à–∫–µ–Ω—Ç", 400, "vegetables"],
  ["ü´ë –ü–µ—Ä–µ—Ü –±–æ–ª–≥–∞—Ä—Å–∫–∏–π ‚Äî 130‚ÇΩ/–∫–≥", "–ü–µ—Ä–µ—Ü –±–æ–ª–≥–∞—Ä—Å–∫–∏–π", 130, "vegetables"],
  ["üå∂Ô∏è –ü–µ—Ä–µ—Ü —á–∏–ª–∏ ‚Äî 25‚ÇΩ/—à—Ç", "–ü–µ—Ä–µ—Ü —á–∏–ª–∏", 25, "vegetables"],
  ["üçÖ –ü–æ–º–∏–¥–æ—Ä—ã –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∏–µ ‚Äî 220‚ÇΩ/–∫–≥", "–ü–æ–º–∏–¥–æ—Ä—ã –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∏–µ", 220, "vegetables"],
  ["üçÖ –ü–æ–º–∏–¥–æ—Ä—ã –†–æ—Å—Ç–æ–≤—Å–∫–∏–µ ‚Äî 180‚ÇΩ/–∫–≥", "–ü–æ–º–∏–¥–æ—Ä—ã –†–æ—Å—Ç–æ–≤—Å–∫–∏–µ", 180, "vegetables"],
  ["üçÖ –ü–æ–º–∏–¥–æ—Ä—ã –í–æ–ª–≥–æ–≥—Ä–∞–¥ (–º–µ–ª–∫–∏–µ) ‚Äî 80‚ÇΩ/–∫–≥", "–ü–æ–º–∏–¥–æ—Ä—ã –í–æ–ª–≥–æ–≥—Ä–∞–¥ (–º–µ–ª–∫–∏–µ)", 80, "vegetables"],
  ["üçÖ –ü–æ–º–∏–¥–æ—Ä—ã –¥–æ–º–∞—à–Ω–∏–µ ‚Äî 240‚ÇΩ/–∫–≥", "–ü–æ–º–∏–¥–æ—Ä—ã –¥–æ–º–∞—à–Ω–∏–µ", 240, "vegetables"],
  ["üçÖ –ü–æ–º–∏–¥–æ—Ä—ã –ê—Å—Ç—Ä–∞—Ö–∞–Ω—å (–∂–µ–ª—Ç—ã–µ) ‚Äî 190‚ÇΩ/–∫–≥", "–ü–æ–º–∏–¥–æ—Ä—ã –ê—Å—Ç—Ä–∞—Ö–∞–Ω—å (–∂–µ–ª—Ç—ã–µ)", 190, "vegetables"],
  ["ü•í –û–≥—É—Ä—Ü—ã –ú–æ—Å–∫–æ–≤—Å–∫–∏–µ ‚Äî 150‚ÇΩ/–∫–≥", "–û–≥—É—Ä—Ü—ã –ú–æ—Å–∫–æ–≤—Å–∫–∏–µ", 150, "vegetables"],
  ["ü•í –û–≥—É—Ä—Ü—ã –°–∞–º–∞—Ä—Å–∫–∏–µ ‚Äî 80‚ÇΩ/–∫–≥", "–û–≥—É—Ä—Ü—ã –°–∞–º–∞—Ä—Å–∫–∏–µ", 80, "vegetables"],
  ["ü•í –û–≥—É—Ä—Ü—ã –¥–æ–º–∞—à–Ω–∏–µ ‚Äî 150‚ÇΩ/–∫–≥", "–û–≥—É—Ä—Ü—ã –¥–æ–º–∞—à–Ω–∏–µ", 150, "vegetables"],
  ["üçë –°–ª–∏–≤–∞ 4 –≤–∏–¥–∞ ‚Äî 190‚ÇΩ/–∫–≥ - –¢–∞—à–∫–µ–Ω—Ç; –ú–µ–¥–æ–≤–∞—è - 220‚ÇΩ/–∫–≥; –ñ–µ–ª—Ç–∞—è - 250‚ÇΩ/–∫–≥; –ß–µ—Ä–Ω–æ—Å–ª–∏–≤–∞ - 220‚ÇΩ/–∫–≥", "–°–ª–∏–≤–∞ 4 –≤–∏–¥–∞", 220, "fruits"],
  ["üçí –ß–µ—Ä–µ—à–Ω—è ‚Äî 580‚ÇΩ/–∫–≥", "–ß–µ—Ä–µ—à–Ω—è", 580, "fruits"],
  ["ü´ê –ì–æ–ª—É–±–∏–∫–∞ ‚Äî 800‚ÇΩ/–∫–≥", "–ì–æ–ª—É–±–∏–∫–∞", 800, "fruits"],
  ["üçë –ê–±—Ä–∏–∫–æ—Å –ê—Ä–º–µ–Ω–∏—è ‚Äî 240‚ÇΩ/–∫–≥", "–ê–±—Ä–∏–∫–æ—Å –ê—Ä–º–µ–Ω–∏—è", 240, "fruits"],
  ["üçë –ê–±—Ä–∏–∫–æ—Å –ö–∏—Ä–≥–∏–∑–∏—è ‚Äî 150‚ÇΩ/–∫–≥", "–ê–±—Ä–∏–∫–æ—Å –ö–∏—Ä–≥–∏–∑–∏—è", 150, "fruits"],
  ["üçë –ü–µ—Ä—Å–∏–∫ –¢–∞—à–∫–µ–Ω—Ç ‚Äî 250‚ÇΩ/–∫–≥", "–ü–µ—Ä—Å–∏–∫ –¢–∞—à–∫–µ–Ω—Ç", 250, "fruits"],
  ["üçë –ü–µ—Ä—Å–∏–∫ –ê—Ä–º–µ–Ω–∏—è ‚Äî 380‚ÇΩ/–∫–≥", "–ü–µ—Ä—Å–∏–∫ –ê—Ä–º–µ–Ω–∏—è", 380, "fruits"],
  ["üçë –ü–µ—Ä—Å–∏–∫ –¢—É—Ä—Ü–∏—è ‚Äî 450‚ÇΩ/–∫–≥", "–ü–µ—Ä—Å–∏–∫ –¢—É—Ä—Ü–∏—è", 450, "fruits"],
  ["üçë –ü–µ—Ä—Å–∏–∫ –ò–Ω–∂–∏—Ä–Ω—ã–π ‚Äî 350‚ÇΩ/–∫–≥", "–ü–µ—Ä—Å–∏–∫ –ò–Ω–∂–∏—Ä–Ω—ã–π", 350, "fruits"],
  ["ü•ù –ö–∏–≤–∏ ‚Äî 450‚ÇΩ/–∫–≥", "–ö–∏–≤–∏", 450, "fruits"],
  ["–ö–∞–±–∞—á–æ–∫ ‚Äî 55‚ÇΩ/–∫–≥", "–ö–∞–±–∞—á–æ–∫", 55, "vegetables"],
  ["üçÜ –ë–∞–∫–ª–∞–∂–∞–Ω ‚Äî 130‚ÇΩ/–∫–≥", "–ë–∞–∫–ª–∞–∂–∞–Ω", 130, "vegetables"],
  ["üçã –õ–∏–º–æ–Ω ‚Äî 290‚ÇΩ/–∫–≥", "–õ–∏–º–æ–Ω", 290, "fruits"]
];

/* ====== State ====== */
let cart = []; // items: {id,name,price,qty}
let visibleProducts = products.slice();
let currentFilter = 'all';

/* ====== DOM refs ====== */
const catalog = document.getElementById('catalog');
const filters = document.getElementById('filters');
const shownCount = document.getElementById('shown-count');
const cartPanel = document.getElementById('cart-panel');
const cartItemsWrap = document.getElementById('cart-items');
const cartSumEl = document.getElementById('cart-sum');
const cartCount = document.getElementById('cart-count-2');
const cartCountTop = document.getElementById('cart-count');
const openCartBtn = document.getElementById('open-cart');
const gotoCheckoutBtn = document.getElementById('goto-checkout');
const checkoutPage = document.getElementById('checkout-page');
const backToCatalogBtn = document.getElementById('back-to-catalog');
const heroOrder = document.getElementById('hero-order');
const viewCatalog = document.getElementById('view-catalog');

/* ====== Helpers ====== */
function formatRub(v){ return Math.round(v) + ' ‚ÇΩ'; }
function idify(s){ return s.replace(/\W+/g,'_'); }

/* ====== Render catalog ====== */
function renderCatalog(list){
  catalog.innerHTML = '';
  list.forEach((p, idx)=>{
    const [label,name,price,category] = p;
    const id = idify(name)+idx;
    const card = document.createElement('div'); card.className='card fade-in';
    card.innerHTML = `
      <div class="photo"><img data-src="https://via.placeholder.com/600x400?text=${encodeURIComponent(name)}" alt="${name}" loading="lazy"/></div>
      <div class="info">
        <div class="name">${label}</div>
        <div class="desc">${name}</div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:auto">
          <div class="price">${price} ‚ÇΩ/–∫–≥</div>
          <div class="actions">
            <button class="add-to-cart" data-id="${id}" data-idx="${idx}">–í –∫–æ—Ä–∑–∏–Ω—É</button>
          </div>
        </div>
      </div>
    `;
    catalog.appendChild(card);

    // lazy load images with fade-in
    const img = card.querySelector('img');
    img.onload = ()=> img.style.opacity = '1';
    img.src = img.dataset.src;
  });
  shownCount.textContent = list.length;
}

/* ====== Filters ====== */
filters.addEventListener('click', (e)=>{
  const btn = e.target.closest('button[data-filter]');
  if(!btn) return;
  filters.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  const f = btn.dataset.filter;
  currentFilter = f;
  if(f==='all') visibleProducts = products.slice();
  else visibleProducts = products.filter(p => (f==='sets' || f==='promo') ? false : p[3] === f); // sets/promo none now
  renderCatalog(visibleProducts);
});

/* ====== Add to cart (delegation) ====== */
catalog.addEventListener('click',(e)=>{
  const btn = e.target.closest('.add-to-cart');
  if(!btn) return;
  const idx = parseInt(btn.dataset.idx);
  const product = products[idx];
  // qty default 1 kg
  addToCart(product, 1);
  // micro animation: show check briefly
  const parent = btn.closest('.card');
  const ck = document.createElement('div');
  ck.className = 'checkmark';
  ck.textContent = '‚úì';
  parent.style.position='relative';
  parent.appendChild(ck);
  setTimeout(()=>{ ck.style.opacity='1'; ck.style.transform='scale(1)'; },10);
  setTimeout(()=>{ ck.style.opacity='0'; ck.style.transform='scale(.6)'; },900);
  setTimeout(()=>{ ck.remove(); },1200);
});

/* ====== Cart logic ====== */
function addToCart(product, qty){
  const name = product[1];
  const price = product[2];
  const existing = cart.find(i => i.name === name);
  if(existing){ existing.qty += qty; existing.total = existing.qty * price; }
  else cart.push({ id: idify(name), name, price, qty, total: qty*price });
  renderCart();
}

function removeFromCart(name){
  cart = cart.filter(i => i.name !== name);
  renderCart();
}

function renderCart(){
  cartItemsWrap.innerHTML = '';
  let sum = 0;
  cart.forEach(item=>{
    sum += item.total;
    const row = document.createElement('div');
    row.className = 'cart-row';
    row.innerHTML = `
      <div class="meta">
        <img src="https://via.placeholder.com/80?text=${encodeURIComponent(item.name)}" alt="${item.name}">
        <div class="info">
          <div style="font-weight:700">${item.name}</div>
          <div class="small">${item.qty.toFixed(2)} –∫–≥ ‚Ä¢ ${formatRub(item.total)}</div>
        </div>
      </div>
      <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">
        <button style="background:transparent;border:0;cursor:pointer;color:${'#e74c3c'}" data-remove="${item.name}">‚úï</button>
        <div style="font-weight:700">${formatRub(item.total)}</div>
      </div>
    `;
    cartItemsWrap.appendChild(row);
  });
  cartSumEl.textContent = formatRub(sum);
  const count = cart.reduce((s,i)=>s+i.qty,0);
  cartCount.textContent = cart.length;
  cartCountTop.textContent = cart.length;
  document.getElementById('shown-count').textContent = visibleProducts.length;
  // attach remove listeners
  cartItemsWrap.querySelectorAll('[data-remove]').forEach(btn=>{
    btn.onclick = ()=> removeFromCart(btn.dataset.remove);
  });
}

/* ====== Open/close cart panel ====== */
let cartOpen = false;
openCartBtn.addEventListener('click', toggleCartPanel);
function toggleCartPanel(){
  cartOpen = !cartOpen;
  cartPanel.style.display = cartOpen ? 'block' : 'none';
}

/* clear cart */
document.querySelectorAll('#clear-cart').forEach(b=>{
  b.addEventListener('click', ()=>{
    cart = [];
    renderCart();
    // if cart panel open, close it
    cartPanel.style.display = 'none';
    cartOpen = false;
  });
});

/* goto checkout -> in-page checkout display (no scrolling) */
gotoCheckoutBtn.addEventListener('click', ()=>{
  if(cart.length === 0){ alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞! –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã.'); return; }
  // hide catalog, show checkout
  document.getElementById('catalog-wrap').style.display = 'none';
  checkoutPage.style.display = 'block';
  cartPanel.style.display = 'none';
});

/* Back button from checkout */
backToCatalogBtn.addEventListener('click', ()=>{
  document.getElementById('catalog-wrap').style.display = '';
  checkoutPage.style.display = 'none';
});

/* hero quick order -> open cart/checkout */
heroOrder.addEventListener('click', ()=> {
  // open catalog if hidden
  document.getElementById('catalog-wrap').style.display = '';
  checkoutPage.style.display = 'none';
  // scroll into view
  window.scrollTo({top: document.querySelector('.main').offsetTop - 20, behavior:'smooth'});
});

/* view catalog */
viewCatalog.addEventListener('click', ()=> {
  document.getElementById('catalog-wrap').style.display = '';
  checkoutPage.style.display = 'none';
  window.scrollTo({top: document.querySelector('.main').offsetTop - 20, behavior:'smooth'});
});

/* Checkout form submit -> test alert and clear cart */
const checkoutForm = document.getElementById('checkout-form');
checkoutForm.addEventListener('submit', (e)=>{
  e.preventDefault();
  if(cart.length === 0){ alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!'); return; }
  const name = document.getElementById('cust-name').value || '‚Äî';
  const phone = document.getElementById('cust-phone').value || '‚Äî';
  const city = document.getElementById('cust-city').value || '‚Äî';
  const street = document.getElementById('cust-street').value || '‚Äî';
  const house = document.getElementById('cust-house').value || '‚Äî';
  let message = '–ó–∞–∫–∞–∑:\n\n';
  cart.forEach(i => {
    message += `${i.name} ‚Äî ${i.qty.toFixed(2)} –∫–≥ ‚Äî ${formatRub(i.total)}\n`;
  });
  message += `\n–ò–º—è: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n–ê–¥—Ä–µ—Å: ${city}, ${street}, –¥.${house}\n\n–°–ø–∞—Å–∏–±–æ! (—Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫–Ω–æ)`;
  alert(message);
  // reset
  cart = [];
  renderCart();
  document.getElementById('catalog-wrap').style.display = '';
  checkoutPage.style.display = 'none';
});

/* show/hide custom time */
document.getElementById('delivery-time').addEventListener('change', (e)=>{
  document.getElementById('custom-time').style.display = e.target.value === 'custom' ? 'block' : 'none';
});

/* init renders */
renderCatalog(visibleProducts);
renderCart();

/* simple responsive helper: mobile CTA */
function checkMobile(){
  if(window.innerWidth <= 760){
    document.getElementById('mobile-cta').style.display = 'block';
  } else document.getElementById('mobile-cta').style.display = 'none';
}
checkMobile();
window.addEventListener('resize', checkMobile);

/* lazy image fade (already handled by onload) */
/* end */
</script>
</body>
</html>
