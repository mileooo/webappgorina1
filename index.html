<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ú–∞–≥–∞–∑–∏–Ω –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤</title>
<style>
:root{
  --accent:#27ae60;
  --accent-2:#2ecc71;
  --bg:#f5f7fa;
  --card:#fff;
  --text:#243447;
}
*{box-sizing:border-box}
body{
  font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
  margin:0;
  padding:18px;
  background:var(--bg);
  color:var(--text);
}
h1{text-align:center;margin:6px 0 12px;font-size:26px;}
.categories{display:flex;gap:12px;margin-bottom:12px;flex-wrap:wrap;justify-content:center;}
.categories button{padding:8px 12px;border:none;border-radius:8px;cursor:pointer;background:#eee;font-weight:600;transition:0.12s;}
.categories button.active{background:var(--accent);color:white}
.subcategories{display:flex;gap:10px;margin-bottom:18px;justify-content:center;flex-wrap:wrap;}
.subcategories button{padding:6px 10px;border:none;border-radius:6px;cursor:pointer;background:#ddd;font-size:14px;transition:0.12s;}
.subcategories button.active{background:var(--accent-2);color:white}
.wrap{display:grid;grid-template-columns:1fr 340px;gap:20px;align-items:start;}
#catalog{display:grid;grid-template-columns: repeat(auto-fill,minmax(220px,1fr));gap:16px;}
.card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(35,47,56,0.06);display:flex;flex-direction:column;gap:8px;min-height:200px;transition:transform .12s ease;}
.card:hover{transform:translateY(-4px)}
.img-placeholder{height:110px;border-radius:10px;background:linear-gradient(90deg,#f0f0f0,#fafafa);display:flex;align-items:center;justify-content:center;color:#9aa6b2;font-size:14px;}
.title{font-weight:600;font-size:15px;height:40px;overflow:hidden}
.price{color:#5b6b72;font-size:14px}
.controls{display:flex;gap:8px;align-items:center;margin-top:auto}
.qty{display:flex;gap:6px;align-items:center;border-radius:8px;padding:6px;background:#fbfcfd;border:1px solid #e8eef2;}
.qty input[type="number"]{width:70px;border:0;outline:none;text-align:center;font-size:14px;background:transparent;}
.unit-select{padding:6px 8px;border-radius:8px;border:1px solid #e8eef2;background:white;font-size:13px;}
.add-btn{background:var(--accent);color:white;border:0;padding:9px 10px;border-radius:10px;cursor:pointer;font-weight:600;transition:background .12s;}
.add-btn:hover{background:var(--accent-2)}
.cart{position:sticky;top:18px;background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(35,47,56,0.06);max-height:80vh;overflow:auto;}
.cart h3{margin:0 0 8px;text-align:center}
.cart-list{display:flex;flex-direction:column;gap:8px}
.cart-item{display:flex;justify-content:space-between;align-items:center;gap:8px;border-radius:8px;padding:8px;background:#fbfdff;border:1px solid #eef6f2;font-size:14px;}
.cart-item .left{display:flex;flex-direction:column;gap:6px}
.cart-controls{display:flex;gap:6px;align-items:center}
.mini-btn{border:1px solid #e3e9ea;background:white;padding:6px 8px;border-radius:8px;cursor:pointer;}
.remove{background:#fdecea;color:#b82c1a;border:0;padding:6px 8px;border-radius:8px;cursor:pointer}
.total{margin-top:10px;text-align:right;font-weight:700;font-size:16px;}
.cart-actions{display:flex;gap:8px;margin-top:10px}
.btn{flex:1;padding:10px;border-radius:10px;border:0;cursor:pointer;font-weight:700;}
.btn-clear{background:#f44336;color:white}
.btn-check{background:var(--accent);color:white}
@media (max-width:980px){.wrap{grid-template-columns:1fr}.cart{position:static}}
.muted{color:#6f7f87;font-size:13px}
</style>
</head>
<body>
<h1>ü•ï –ú–∞–≥–∞–∑–∏–Ω –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤</h1>

<div class="categories" id="category-buttons">
  <button class="active" data-cat="fruits">–§—Ä—É–∫—Ç—ã</button>
  <button data-cat="vegetables">–û–≤–æ—â–∏</button>
</div>

<div class="subcategories" id="subcategory-buttons"></div>

<div class="wrap">
  <div>
    <div id="catalog"></div>
  </div>
  <aside class="cart" id="cart">
    <h3>üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>
    <div id="cart-list" class="cart-list"></div>
    <div class="total" id="cart-total">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
    <div class="cart-actions">
      <button id="clear-cart" class="btn btn-clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
      <button id="checkout" class="btn btn-check">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>
    <div style="margin-top:10px;font-size:13px;color:#667f87;text-align:center">
      –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º ‚Äî –∑–∞–∫–∞–∑ –ø–æ–∫–∞ —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    </div>
  </aside>
</div>

<script>
const products = [
  // –§—Ä—É–∫—Ç—ã
  {name:"–ê—Ä–±—É–∑", price:40, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–ë–∞–Ω–∞–Ω", price:170, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–î—ã–Ω—è —Ç–æ—Ä–ø–µ–¥–∞ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω", price:80, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–î—ã–Ω—è –∫–æ–ª—Ö–æ–∑–Ω–∏—Ü–∞", price:80, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–ß–µ—Ä–µ—à–Ω—è", price:580, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–ì–æ–ª—É–±–∏–∫–∞", price:800, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–í–∏–Ω–æ–≥—Ä–∞–¥ –∑–µ–ª–µ–Ω—ã–π (–±–µ–∑ –∫–æ—Å—Ç–æ—á–µ–∫)", price:320, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–í–∏–Ω–æ–≥—Ä–∞–¥ —Ç–µ–º–Ω—ã–π (–±–µ–∑ –∫–æ—Å—Ç–æ—á–µ–∫)", price:320, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–í–∏–Ω–æ–≥—Ä–∞–¥ —á–µ—Ä–Ω—ã–π (–ú–µ—Ä—Å–µ–¥–µ—Å)", price:300, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–ü–µ—Ä—Å–∏–∫ –¢–∞—à–∫–µ–Ω—Ç", price:250, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ü–µ—Ä—Å–∏–∫ –ê—Ä–º–µ–Ω–∏—è", price:380, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ü–µ—Ä—Å–∏–∫ –¢—É—Ä—Ü–∏—è", price:450, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ü–µ—Ä—Å–∏–∫ –ò–Ω–∂–∏—Ä–Ω—ã–π", price:350, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ê–±—Ä–∏–∫–æ—Å –ê—Ä–º–µ–Ω–∏—è", price:240, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ê–±—Ä–∏–∫–æ—Å –ö–∏—Ä–≥–∏–∑–∏—è", price:150, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–°–ª–∏–≤–∞ 4 –≤–∏–¥–∞", price:220, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ù–µ–∫—Ç–∞—Ä–∏–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∫—Ä–∞—Å–Ω—ã–π", price:170, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ù–µ–∫—Ç–∞—Ä–∏–Ω –¢—É—Ä—Ü–∏—è", price:350, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ù–µ–∫—Ç–∞—Ä–∏–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∂–µ–ª—Ç—ã–π (–≤–∫—É—Å –ª–∏–º–æ–Ω)", price:250, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ù–µ–∫—Ç–∞—Ä–∏–Ω –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∑–µ–ª–µ–Ω—ã–π", price:190, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ê–ø–µ–ª—å—Å–∏–Ω", price:220, category:"fruits", subcategory:"–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ"},
  {name:"–õ–∏–º–æ–Ω", price:290, category:"fruits", subcategory:"–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ"},
  {name:"–ö–∏–≤–∏", price:450, category:"fruits", subcategory:"–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ"},
  {name:"–ì—Ä—É—à–∞", price:340, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  // –û–≤–æ—â–∏
  {name:"–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ß—É–≤–∞—à–∏—è", price:45, category:"vegetables"},
  {name:"–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä", price:45, category:"vegetables"},
  {name:"–ú–æ—Ä–∫–æ–≤—å –í–æ–ª–≥–æ–≥—Ä–∞–¥", price:45, category:"vegetables"},
  {name:"–õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π –í–æ–ª–≥–æ–≥—Ä–∞–¥", price:45, category:"vegetables"},
  {name:"–õ—É–∫ –∑–µ–ª–µ–Ω—ã–π", price:350, category:"vegetables"},
  {name:"–£–∫—Ä–æ–ø, –ø–µ—Ç—Ä—É—à–∫–∞", price:350, category:"vegetables"},
  {name:"–ö–∏–Ω–∑–∞", price:440, category:"vegetables"},
  {name:"–ë–∞–∑–µ–ª–∏–∫ (–ø—É—á–æ–∫)", price:50, category:"vegetables"},
  {name:"–ß–µ—Å–Ω–æ–∫ –¢–∞—à–∫–µ–Ω—Ç", price:400, category:"vegetables"},
  {name:"–ü–µ—Ä–µ—Ü –±–æ–ª–≥–∞—Ä—Å–∫–∏–π", price:130, category:"vegetables"},
  {name:"–ü–µ—Ä–µ—Ü —á–∏–ª–∏", price:25, category:"vegetables"},
  {name:"–ü–æ–º–∏–¥–æ—Ä—ã –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∏–µ", price:220, category:"vegetables"},
  {name:"–ü–æ–º–∏–¥–æ—Ä—ã –†–æ—Å—Ç–æ–≤—Å–∫–∏–µ", price:180, category:"vegetables"},
  {name:"–ü–æ–º–∏–¥–æ—Ä—ã –í–æ–ª–≥–æ–≥—Ä–∞–¥ (–º–µ–ª–∫–∏–µ)", price:80, category:"vegetables"},
  {name:"–ü–æ–º–∏–¥–æ—Ä—ã –¥–æ–º–∞—à–Ω–∏–µ", price:240, category:"vegetables"},
  {name:"–ü–æ–º–∏–¥–æ—Ä—ã –ê—Å—Ç—Ä–∞—Ö–∞–Ω—å (–∂–µ–ª—Ç—ã–µ)", price:190, category:"vegetables"},
  {name:"–û–≥—É—Ä—Ü—ã –ú–æ—Å–∫–æ–≤—Å–∫–∏–µ", price:150, category:"vegetables"},
  {name:"–û–≥—É—Ä—Ü—ã –°–∞–º–∞—Ä—Å–∫–∏–µ", price:80, category:"vegetables"},
  {name:"–û–≥—É—Ä—Ü—ã –¥–æ–º–∞—à–Ω–∏–µ", price:150, category:"vegetables"},
  {name:"–ö–∞–±–∞—á–æ–∫", price:55, category:"vegetables"},
  {name:"–ë–∞–∫–ª–∞–∂–∞–Ω", price:130, category:"vegetables"}
];

let cart=[];
let selectedCategory="fruits";
let selectedSubcategory=null;

const catalogEl=document.getElementById('catalog');
const cartListEl=document.getElementById('cart-list');
const cartTotalEl=document.getElementById('cart-total');
const clearBtn=document.getElementById('clear-cart');
const checkoutBtn=document.getElementById('checkout');
const categoryButtons=document.getElementById('category-buttons');
const subcategoryButtons=document.getElementById('subcategory-buttons');

function idify(name){return name.replace(/\s+/g,'_').replace(/[^\w\-]/g,'');}
function rub(v){return Math.round(v)+' ‚ÇΩ';}

function renderSubcategories(){
  subcategoryButtons.innerHTML='';
  if(selectedCategory==='fruits'){
    const subs=["–Ø–≥–æ–¥—ã","–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ","–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ"];
    subs.forEach(sub=>{
      const btn=document.createElement('button');
      btn.textContent=sub;
      btn.className=selectedSubcategory===sub?'active':'';
      btn.onclick=()=>{selectedSubcategory=sub; renderSubcategories(); renderCatalog();}
      subcategoryButtons.appendChild(btn);
    });
  } else selectedSubcategory=null;
}

function renderCatalog(){
  catalogEl.innerHTML='';
  let filtered=products.filter(p=>p.category===selectedCategory);
  if(selectedSubcategory) filtered=filtered.filter(p=>p.subcategory===selectedSubcategory);

  filtered.forEach(prod=>{
    const id=idify(prod.name);
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`<div class="img-placeholder">–§–æ—Ç–æ (–ø–æ–∫–∞)</div>
      <div class="title">${prod.name}</div>
      <div class="price muted">${prod.price} ‚ÇΩ/–∫–≥</div>`;
    
    const controls=document.createElement('div'); controls.className='controls';
    const qtyWrap=document.createElement('div'); qtyWrap.className='qty';
    const qtyInput=document.createElement('input'); qtyInput.type='number'; qtyInput.id=`qty-${id}`; qtyInput.step='0.1'; qtyInput.min='0.1'; qtyInput.value='1';
    const unitSelect=document.createElement('select'); unitSelect.className='unit-select'; unitSelect.id=`unit-${id}`;
    unitSelect.innerHTML=`<option value="kg">–∫–≥</option><option value="g">–≥</option>`;
    qtyWrap.appendChild(qtyInput); qtyWrap.appendChild(unitSelect);
    const addBtn=document.createElement('button'); addBtn.className='add-btn'; addBtn.textContent='–î–æ–±–∞–≤–∏—Ç—å';
    addBtn.onclick=()=>{
      let qty=parseFloat(qtyInput.value);
      if(unitSelect.value==='g') qty/=1000;
      addToCart(prod,qty);
    };
    controls.appendChild(qtyWrap); controls.appendChild(addBtn);
    card.appendChild(controls);
    catalogEl.appendChild(card);
  });
}

function addToCart(prod,qty){
  const existing=cart.find(c=>c.name===prod.name);
  if(existing){existing.qty+=qty; existing.total=existing.qty*prod.price;}
  else cart.push({name:prod.name,qty,total:qty*prod.price});
  renderCart();
}

function renderCart(){
  cartListEl.innerHTML='';
  let total=0;
  cart.forEach(item=>{
    total+=item.total;
    const div=document.createElement('div'); div.className='cart-item';
    div.innerHTML=`<div class="left">${item.name} <span class="muted">${item.qty.toFixed(2)} –∫–≥</span></div>
      <div>${rub(item.total)}</div>
      <button class="remove" onclick="removeFromCart('${item.name}')">√ó</button>`;
    cartListEl.appendChild(div);
  });
  cartTotalEl.textContent='–ò—Ç–æ–≥–æ: '+rub(total);
}

function removeFromCart(name){cart=cart.filter(c=>c.name!==name); renderCart();}

clearBtn.onclick=()=>{cart=[]; renderCart();}
checkoutBtn.onclick=()=>{alert('–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑:\n'+cart.map(c=>c.name+' ‚Äî '+c.qty.toFixed(2)+' –∫–≥ ‚Äî '+rub(c.total)).join('\n'));}

categoryButtons.querySelectorAll('button').forEach(btn=>{
  btn.onclick=()=>{
    categoryButtons.querySelectorAll('button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    selectedCategory=btn.dataset.cat;
    selectedSubcategory=null;
    renderSubcategories();
    renderCatalog();
  }
});

renderSubcategories();
renderCatalog();
</script>
</body>
</html>
