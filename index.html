<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ú–∞–≥–∞–∑–∏–Ω –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤</title>
<style>
:root {
  --main-bg: #FFFFFF;
  --card-bg: #FAF9F6;
  --brand-color: #A4DE02;
  --cta-hover: #FF8C42;
  --text-main: #2E2E2E;
  --text-secondary: #666666;
  --border-color: #E6E6E6;
  --success: #5CB85C;
  --error: #E74C3C;
}
body {
  font-family: 'Inter', sans-serif;
  margin: 0;
  padding: 0;
  background-color: var(--main-bg);
  color: var(--text-main);
}
h1 {text-align:center; margin:20px 0;}
.categories, .subcategories {display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-bottom:15px;}
.categories button, .subcategories button {
  padding:8px 12px; border:none; border-radius:8px; cursor:pointer; font-weight:600; transition:0.12s;
}
.categories button.active {background:var(--brand-color); color:white;}
.subcategories button.active {background:#2ecc71; color:white;}
.wrap {display:grid; grid-template-columns:1fr 340px; gap:20px; align-items:start; padding:0 20px;}
#catalog {display:grid; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap:16px;}
.card {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  display:flex; flex-direction:column; gap:8px;
  min-height:250px;
  transition: transform 0.2s ease;
}
.card:hover {transform: scale(1.03);}
.img-placeholder {height:120px; border-radius:10px; background:#eee; display:flex; align-items:center; justify-content:center; color:#999;}
.title {font-weight:600; font-size:16px; height:40px; overflow:hidden;}
.price {color:var(--text-secondary); font-size:14px;}
.controls {display:flex; gap:8px; align-items:center; margin-top:auto;}
.qty {display:flex; gap:6px; align-items:center; border-radius:8px; padding:6px; background:#fff; border:1px solid var(--border-color);}
.qty input {width:70px; border:0; outline:none; text-align:center; font-size:14px; background:transparent;}
.unit-select {padding:6px 8px; border-radius:8px; border:1px solid var(--border-color); background:white; font-size:13px;}
.add-btn {background:var(--brand-color); color:white; border:0; padding:9px 10px; border-radius:10px; cursor:pointer; font-weight:600; transition:0.12s;}
.add-btn:hover {background:var(--cta-hover);}
.cart {
  position:sticky; top:20px; background:var(--card-bg); border-radius:12px; padding:14px;
  box-shadow:0 2px 8px rgba(0,0,0,0.05); max-height:80vh; overflow:auto;
}
.cart h3 {margin-top:0; text-align:center;}
.cart-list {display:flex; flex-direction:column; gap:8px;}
.cart-item {display:flex; justify-content:space-between; align-items:center; padding:8px; background:#fff; border-radius:8px; font-size:14px; border:1px solid var(--border-color);}
.cart-actions {display:flex; gap:8px; margin-top:10px;}
.btn {flex:1; padding:10px; border-radius:10px; border:none; cursor:pointer; font-weight:700;}
.btn-clear {background:#f44336; color:white;}
.btn-check {background:var(--brand-color); color:white; transition:0.2s;}
.btn-check:hover {background:var(--cta-hover);}
#checkout-section {display:none; padding:20px;}
.checkout-form {display:flex; flex-direction:column; gap:12px; max-width:400px; margin:0 auto;}
.checkout-form input, .checkout-form select {padding:8px; border-radius:8px; border:1px solid #ccc; font-size:14px; width:100%;}
.checkout-form label {font-weight:600; font-size:14px;}
.checkout-form button {padding:10px; background:var(--brand-color); color:white; border:none; border-radius:10px; cursor:pointer; font-weight:600;}
.checkout-form button:hover {background:var(--cta-hover);}
</style>
</head>
<body>

<h1>ü•ï –ú–∞–≥–∞–∑–∏–Ω –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤</h1>

<div class="categories" id="category-buttons">
  <button class="active" data-cat="fruits">–§—Ä—É–∫—Ç—ã</button>
  <button data-cat="vegetables">–û–≤–æ—â–∏</button>
</div>

<div class="subcategories" id="subcategory-buttons"></div>

<div class="wrap">
  <div id="catalog-wrap">
    <div id="catalog"></div>
  </div>
  <aside class="cart" id="cart">
    <h3>üõí –ö–æ—Ä–∑–∏–Ω–∞</h3>
    <div id="cart-list" class="cart-list"></div>
    <div class="total" id="cart-total">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
    <div class="cart-actions">
      <button id="clear-cart" class="btn btn-clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
      <button id="checkout" class="btn btn-check">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>
  </aside>
</div>

<div id="checkout-section">
  <h2>üì¶ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
  <form class="checkout-form" id="checkout-form">
    <label>–ò–º—è *</label>
    <input type="text" id="cust-name" required>
    
    <label>–¢–µ–ª–µ—Ñ–æ–Ω *</label>
    <input type="tel" id="cust-phone" required>
    
    <label>–î–æ–ø. —Ç–µ–ª–µ—Ñ–æ–Ω (–ø–æ –∂–µ–ª–∞–Ω–∏—é)</label>
    <input type="tel" id="cust-phone2">
    
    <label>–ì–æ—Ä–æ–¥ *</label>
    <input type="text" id="cust-city" required>
    
    <label>–£–ª–∏—Ü–∞ *</label>
    <input type="text" id="cust-street" required>
    
    <label>–î–æ–º *</label>
    <input type="text" id="cust-house" required>
    
    <label>–ü–æ–¥—ä–µ–∑–¥</label>
    <input type="text" id="cust-entrance">
    
    <label>–≠—Ç–∞–∂</label>
    <input type="text" id="cust-floor">
    
    <label>–ö–≤–∞—Ä—Ç–∏—Ä–∞</label>
    <input type="text" id="cust-apartment">
    
    <label>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
    <select id="delivery-time">
      <option value="asap">–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ</option>
      <option value="custom">–£–∫–∞–∑–∞—Ç—å –≤—Ä–µ–º—è</option>
    </select>
    <input type="time" id="custom-time" style="display:none;">
    
    <label>–ü–æ—á—Ç–∞ *</label>
    <input type="email" id="cust-email" required>
    
    <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã *</label>
    <select id="payment-method" required>
      <option value="cash">–ù–∞–ª–∏—á–Ω—ã–µ</option>
      <option value="online">–û–Ω–ª–∞–π–Ω (–∫–∞—Ä—Ç–∞ / –°–ë–ü)</option>
    </select>
    
    <button type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </form>
</div>

<script>
const products=[
  {name:"–ê—Ä–±—É–∑", price:40, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–ë–∞–Ω–∞–Ω", price:170, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–î—ã–Ω—è –¢–æ—Ä–ø–µ–¥–∞", price:80, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–î—ã–Ω—è –ö–æ–ª—Ö–æ–∑–Ω–∏—Ü–∞", price:80, category:"fruits", subcategory:"–Ø–≥–æ–¥—ã"},
  {name:"–ö–∏–≤–∏", price:450, category:"fruits", subcategory:"–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ"},
  {name:"–ì—Ä—É—à–∞", price:340, category:"fruits", subcategory:"–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ"},
  {name:"–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å", price:45, category:"vegetables", subcategory:"–ö–æ—Ä–Ω–µ–ø–ª–æ–¥—ã"},
  {name:"–ú–æ—Ä–∫–æ–≤—å", price:45, category:"vegetables", subcategory:"–ö–æ—Ä–Ω–µ–ø–ª–æ–¥—ã"},
  {name:"–ü–æ–º–∏–¥–æ—Ä—ã", price:220, category:"vegetables", subcategory:"–¢–æ–º–∞—Ç—ã –∏ –æ–≥—É—Ä—Ü—ã"},
  {name:"–û–≥—É—Ä—Ü—ã", price:150, category:"vegetables", subcategory:"–¢–æ–º–∞—Ç—ã –∏ –æ–≥—É—Ä—Ü—ã"},
  {name:"–ü–µ—Ä–µ—Ü –±–æ–ª–≥–∞—Ä—Å–∫–∏–π", price:130, category:"vegetables", subcategory:"–ü–µ—Ä—Ü—ã"},
  {name:"–ü–µ—Ä–µ—Ü —á–∏–ª–∏", price:25, category:"vegetables", subcategory:"–ü–µ—Ä—Ü—ã"},
  {name:"–õ—É–∫ –∑–µ–ª—ë–Ω—ã–π", price:350, category:"vegetables", subcategory:"–ó–µ–ª–µ–Ω—å"}
];

let cart=[];
let selectedCategory="fruits";
let selectedSubcategory=null;

const catalogEl=document.getElementById('catalog');
const cartListEl=document.getElementById('cart-list');
const cartTotalEl=document.getElementById('cart-total');
const clearBtn=document.getElementById('clear-cart');
const checkoutBtn=document.getElementById('checkout');
const categoryButtons=document.getElementById('category-buttons');
const subcategoryButtons=document.getElementById('subcategory-buttons');
const catalogWrap=document.getElementById('catalog-wrap');
const checkoutSection=document.getElementById('checkout-section');
const checkoutForm=document.getElementById('checkout-form');
const deliveryTimeSelect=document.getElementById('delivery-time');
const customTimeInput=document.getElementById('custom-time');

function idify(name){return name.replace(/\s+/g,'_').replace(/[^\w\-]/g,'');}
function rub(v){return Math.round(v)+' ‚ÇΩ';}

function renderSubcategories(){
  subcategoryButtons.innerHTML='';
  let subs=[];
  if(selectedCategory==='fruits') subs=["–Ø–≥–æ–¥—ã","–ö–æ—Å—Ç–æ—á–∫–æ–≤—ã–µ","–¶–∏—Ç—Ä—É—Å–æ–≤—ã–µ"];
  else if(selectedCategory==='vegetables') subs=["–ö–æ—Ä–Ω–µ–ø–ª–æ–¥—ã","–¢–æ–º–∞—Ç—ã –∏ –æ–≥—É—Ä—Ü—ã","–ü–µ—Ä—Ü—ã","–ó–µ–ª–µ–Ω—å"];
  subs.forEach(sub=>{
    const btn=document.createElement('button');
    btn.textContent=sub;
    btn.className=selectedSubcategory===sub?'active':'';
    btn.onclick=()=>{selectedSubcategory=sub; renderSubcategories(); renderCatalog();}
    subcategoryButtons.appendChild(btn);
  });
}

function renderCatalog(){
  catalogEl.innerHTML='';
  let filtered=products.filter(p=>p.category===selectedCategory);
  if(selectedSubcategory) filtered=filtered.filter(p=>p.subcategory===selectedSubcategory);
  filtered.forEach(prod=>{
    const id=idify(prod.name);
    const card=document.createElement('div'); card.className='card';
    card.innerHTML=`<div class="img-placeholder">–§–æ—Ç–æ</div>
      <div class="title">${prod.name}</div>
      <div class="price">${prod.price} ‚ÇΩ/–∫–≥</div>`;
    
    const controls=document.createElement('div'); controls.className='controls';
    const qtyWrap=document.createElement('div'); qtyWrap.className='qty';
    const qtyInput=document.createElement('input'); qtyInput.type='number'; qtyInput.id=`qty-${id}`; qtyInput.step='0.1'; qtyInput.min='0.1'; qtyInput.value='1';
    const unitSelect=document.createElement('select'); unitSelect.className='unit-select'; unitSelect.id=`unit-${id}`;
    unitSelect.innerHTML=`<option value="kg">–∫–≥</option><option value="g">–≥</option>`;
    qtyWrap.appendChild(qtyInput); qtyWrap.appendChild(unitSelect);
    const addBtn=document.createElement('button'); addBtn.className='add-btn'; addBtn.textContent='–î–æ–±–∞–≤–∏—Ç—å';
    addBtn.onclick=()=>{
      let qty=parseFloat(qtyInput.value);
      if(unitSelect.value==='g') qty/=1000;
      addToCart(prod,qty);
    };
    controls.appendChild(qtyWrap); controls.appendChild(addBtn);
    card.appendChild(controls);
    catalogEl.appendChild(card);
  });
}

function addToCart(prod,qty){
  const existing=cart.find(c=>c.name===prod.name);
  if(existing){existing.qty+=qty; existing.total=existing.qty*prod.price;}
  else cart.push({name:prod.name,qty,total:qty*prod.price});
  renderCart();
}

function renderCart(){
  cartListEl.innerHTML='';
  let total=0;
  cart.forEach(item=>{
    total+=item.total;
    const div=document.createElement('div'); div.className='cart-item';
    div.innerHTML=`<div>${item.name} - ${item.qty.toFixed(2)} –∫–≥</div><div>${rub(item.total)}</div>
    <button onclick="removeFromCart('${item.name}')">√ó</button>`;
    cartListEl.appendChild(div);
  });
  cartTotalEl.textContent='–ò—Ç–æ–≥–æ: '+rub(total);
}

function removeFromCart(name){cart=cart.filter(c=>c.name!==name); renderCart();}
clearBtn.onclick=()=>{cart=[]; renderCart();}
checkoutBtn.onclick=()=>{checkoutSection.style.display='block'; checkoutSection.scrollIntoView({behavior:'smooth'});}
deliveryTimeSelect.onchange=()=>{customTimeInput.style.display=deliveryTimeSelect.value==='custom'?'block':'none';}
checkoutForm.onsubmit=e=>{e.preventDefault(); alert('–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!'); checkoutForm.reset(); checkoutSection.style.display='none'; cart=[]; renderCart();}

document.querySelectorAll('#category-buttons button').forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll('#category-buttons button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    selectedCategory=btn.dataset.cat; selectedSubcategory=null;
    renderSubcategories(); renderCatalog();
  }
});

renderSubcategories();
renderCatalog();
</script>

</body>
</html>
